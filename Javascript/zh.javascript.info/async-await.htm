<!DOCTYPE html><html lang="zh"><head><meta http-equiv=Content-Type content='text/html; charset=utf-8'>
<script>window.currentUser = null;</script><script>window.rateUsdToNative = 6.8872;</script><title itemprop="name">Async/await</title><link href="pack/styles.9ab2708780c33bc8dadc.css" tppabs="https://zh.javascript.info/pack/styles.9ab2708780c33bc8dadc.css" rel="stylesheet"><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes, minimum-scale=1.0"><meta name="apple-mobile-web-app-capable" content="yes"><!-- chrome autotranslate is enabled only for "en" main version--><meta name="google" content="notranslate"><script>if (window.devicePixelRatio > 1) document.cookie = 'pixelRatio=' + window.devicePixelRatio + ';path=/;expires=Tue, 19 Jan 2038 03:14:07 GMT';</script><link href="../fonts.googleapis.com/css-family=Open+Sans-400italic,700italic,400,700-Open+Sans+Condensed-700&subset=latin,latin-ext,cyrillic,cyrillic-ext.css" tppabs="https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700%7COpen+Sans+Condensed:700&subset=latin,latin-ext,cyrillic,cyrillic-ext" rel="stylesheet"><link rel="apple-touch-icon-precomposed" href="/img/favicon/apple-touch-icon-precomposed.png"><link rel="canonical" href="https://zh.javascript.info/async-await"><meta name="msapplication-TileColor" content="#222A2C"><meta name="msapplication-TileImage" content="/img/favicon/tileicon.png"><link rel="icon" href="/img/favicon/favicon.png"><meta itemprop="image" content="https://zh.javascript.info/img/site_preview_en_512x512.png"><meta property="og:title" content="Async/await"><meta property="og:image" content="https://zh.javascript.info/img/site_preview_en_1200x630.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="fb:admins" content="100001562528165"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Async/await"><meta name="twitter:site" content="@iliakan"><meta name="twitter:creator" content="@iliakan"><meta name="twitter:image" content="https://zh.javascript.info/img/site_preview_en_512x512.png"><link rel="prev" href="/promise-api"><link rel="next" href="/network"><script>window.GA_ID = "UA-2056213-15";</script><script>window.YANDEX_METRIKA_ID = 32184394;</script><script>window.GoogleAnalyticsObject="ga",window.ga=function(){window.ga.q.push(arguments)},window.ga.q=[],window.ga.l=Date.now(),ga("create",GA_ID,"auto"),window.GTM_ID&&ga("require",GTM_ID),window.currentUser?ga("set","&uid",currentUser.id):ga("set","anonymizeIp",!0),window.addEventListener("error",function(e){var r=(e.filename||e.errorUrl)+": "+(e.lineno||e.errorLine),n=e.stack||e.error&&e.error.stack;ga("send","exception",{exDescription:e.message+" "+r+" "+n,exFatal:!0})});</script><script src="../www.google-analytics.com/analytics.js" tppabs="https://www.google-analytics.com/analytics.js" async></script><script>ga('send', 'pageview');</script><script>window.metrika={reachGoal:function(){}},window.yandex_metrika_callbacks=[function(){try{window.metrika=new Ya.Metrika({id:YANDEX_METRIKA_ID,webvisor:!0,clickmap:!0,params:{user:window.currentUser&&window.currentUser.id}}),metrika.trackLinks({delay:150}),window.addEventListener("error",function(r){window.metrika.reachGoal("JSERROR",{src:(r.filename||r.errorUrl)+": "+(r.lineno||r.errorLine),stack:r.stack||r.error&&r.error.stack,message:r.message})})}catch(r){}}];</script><script src="../mc.yandex.ru/metrika/watch.js" tppabs="https://mc.yandex.ru/metrika/watch.js" async></script><script>window.RECAPTCHA_ID = "6Lf9NyETAAAAACZlg-a9Us2SxvYbeVC1ROWaWv4O";</script><script src="pack/init.9ab2708780c33bc8dadc.js" tppabs="https://zh.javascript.info/pack/init.9ab2708780c33bc8dadc.js"></script><script src="pack/head.9ab2708780c33bc8dadc.js" tppabs="https://zh.javascript.info/pack/head.9ab2708780c33bc8dadc.js" defer></script><style>
.promise-avatar-example {
  border-radius: 50%;
  position: fixed;
  left: 10px;
  top: 10px;
}
</style>
<meta property="og:title" content="Async/await"><meta property="og:type" content="article"><script src="pack/tutorial.9ab2708780c33bc8dadc.js" tppabs="https://zh.javascript.info/pack/tutorial.9ab2708780c33bc8dadc.js" defer></script><script src="pack/footer.9ab2708780c33bc8dadc.js" tppabs="https://zh.javascript.info/pack/footer.9ab2708780c33bc8dadc.js" defer></script></head><body class="no-icons"><script>window.fontTest();</script><div class="page-wrapper page-wrapper_sidebar_on"><!--[if lt IE 10]><div style="color:red;text-align:center">å¾ˆæŠ±æ­‰ï¼Œæˆ‘ä»¬ä¸æ”¯æŒ IE&lt;10 ç­‰æµè§ˆå™¨ï¼Œè¯·ä½¿ç”¨ä¸€ä¸ªæ›´æ–°ç‰ˆæœ¬çš„æµè§ˆå™¨ã€‚</div><![endif]--><div class="sitetoolbar sitetoolbar_tutorial"><div class="sitetoolbar__content"><div class="sitetoolbar__lang-switcher"><button class="sitetoolbar__dropdown-button" data-dropdown-toggler>ZH</button><div class="sitetoolbar__dropdown-wrap"><div class="sitetoolbar__dropdown-body"><div class="sitetoolbar__lang-switcher-body"><div class="supported-langs supported-langs_toolbar"><div class="supported-langs__text">æˆ‘ä»¬å¸Œæœ›å°†è¿™ä¸ªå¼€æºé¡¹ç›®æä¾›ç»™å…¨ä¸–ç•Œçš„äººã€‚è¯·å¸®åŠ©æˆ‘ä»¬å°†æ•™ç¨‹çš„å†…å®¹ <a href="javascript:if(confirm('https://github.com/iliakan/javascript-tutorial-en  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/iliakan/javascript-tutorial-en'" tppabs="https://github.com/iliakan/javascript-tutorial-en" rel="noopener noreferrer" target="_blank">ç¿»è¯‘ä¸ºä½ æ‰€æŒæ¡çš„è¯­è¨€</a> å¯¹åº”çš„ç‰ˆæœ¬ã€‚</div><div class="supported-langs__container"><ul class="supported-langs__list" style="height:128px"><li class="supported-langs__item"><a class="supported-langs__link" href="javascript:if(confirm('https://javascript.info/async-await  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://javascript.info/async-await'" tppabs="https://javascript.info/async-await"><span class="supported-langs__brief">EN</span><span class="supported-langs__title">English</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="javascript:if(confirm('https://learn.javascript.ru/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://learn.javascript.ru/'" tppabs="https://learn.javascript.ru/"><span class="supported-langs__brief">RU</span><span class="supported-langs__title">Ğ ÑƒÑÑĞºĞ¸Ğ¹</span></a></li><li class="supported-langs__item supported-langs__item_current"><a class="supported-langs__link" href="async-await.htm" tppabs="https://zh.javascript.info/async-await"><span class="supported-langs__brief">ZH</span><span class="supported-langs__title">ç®€ä½“ä¸­æ–‡</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="javascript:if(confirm('https://ja.javascript.info/async-await  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://ja.javascript.info/async-await'" tppabs="https://ja.javascript.info/async-await"><span class="supported-langs__brief">JA</span><span class="supported-langs__title">æ—¥æœ¬èª</span></a></li></ul></div></div></div></div></div></div><div class="sitetoolbar__logo-wrap"><a class="sitetoolbar__link sitetoolbar__link_logo" href="index.htm" tppabs="https://zh.javascript.info/"><img class="sitetoolbar__logo sitetoolbar__logo_normal" src="img/sitetoolbar__logo_en.svg" tppabs="https://zh.javascript.info/img/sitetoolbar__logo_en.svg" width="200" alt="" role="presentation"/><img class="sitetoolbar__logo sitetoolbar__logo_small" src="img/sitetoolbar__logo_small_en.svg" tppabs="https://zh.javascript.info/img/sitetoolbar__logo_small_en.svg" width="70" alt="" role="presentation"/><script>Array.prototype.forEach.call(document.querySelectorAll("img.sitetoolbar__logo"),function(e){let t=document.createElement("object");t.type="image/svg+xml",t.className=e.className,t.style.cssText="left:0;top:0;position:absolute",t.onload=function(){t.onload=null,e.style.visibility="hidden"},t.data=e.src,e.parentNode.insertBefore(t,e)});</script></a></div><div class="sitetoolbar__nav-toggle-wrap"><button class="sitetoolbar__nav-toggle" type="button"></button></div><nav class="sitetoolbar__sections"><ul class="sitetoolbar__sections-list"></ul></nav><div class="sitetoolbar__book-wrap"><a class="buy-book-button" href="ebook.htm" tppabs="https://zh.javascript.info/ebook"><span class="buy-book-button__extra-text">è´­ä¹°</span>EPUB/PDF</a></div><div class="sitetoolbar__search-wrap"><div class="sitetoolbar__search-content"><form class="sitetoolbar__search" method="GET" action="https://zh.javascript.info/search"><button class="sitetoolbar__search-toggle" type="button"></button><div class="sitetoolbar__search-input"><div class="text-input"><input class="text-input__control" name="query" placeholder="åœ¨ Javascript.info ç½‘ç«™ä¸­æœç´¢" required="required" type="text"/></div><button class="sitetoolbar__find" type="submit">æœç´¢</button></div></form></div></div></div><div class="tablet-menu"><div class="tablet-menu__line"><div class="tablet-menu__content"><form class="tablet-menu-search" action="https://zh.javascript.info/search/"><input class="tablet-menu-search__input" type="search" name="query" placeholder="åœ¨æ•™ç¨‹ä¸­æœç´¢" required="required"/><button class="tablet-menu-search__button" type="submit" name="type" value="articles">æœç´¢</button></form></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><a class="map" href="tutorial/map.htm" tppabs="https://zh.javascript.info/tutorial/map" data-action="tutorial-map"><span class="map__text">æ•™ç¨‹è·¯çº¿å›¾</span></a></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><div class="share-icons"><span class="share-icons__title">åˆ†äº«</span><a class="share share_tw" href="javascript:if(confirm('https://twitter.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fasync-await  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://twitter.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fasync-await'" tppabs="https://twitter.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fasync-await"></a><a class="share share_fb" href="javascript:if(confirm('https://www.facebook.com/sharer/sharer.php?s=100&p%5Burl%5D=https%3A%2F%2Fzh.javascript.info%2Fasync-await  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.facebook.com/sharer/sharer.php?s=100&p%5Burl%5D=https%3A%2F%2Fzh.javascript.info%2Fasync-await'" tppabs="https://www.facebook.com/sharer/sharer.php?s=100&p%5Burl%5D=https%3A%2F%2Fzh.javascript.info%2Fasync-await"></a><a class="share share_gp" href="javascript:if(confirm('https://plus.google.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fasync-await  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://plus.google.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fasync-await'" tppabs="https://plus.google.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fasync-await"></a><a class="share share_vk" href="javascript:if(confirm('https://vkontakte.ru/share.php?url=https%3A%2F%2Fzh.javascript.info%2Fasync-await  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://vkontakte.ru/share.php?url=https%3A%2F%2Fzh.javascript.info%2Fasync-await'" tppabs="https://vkontakte.ru/share.php?url=https%3A%2F%2Fzh.javascript.info%2Fasync-await"></a></div></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><select class="tablet-menu__nav input-select input-select input-select_small" onchange="if(this.value) window.location.href=this.value"><option value="https://javascript.info/async-await">English</option><option value="https://learn.javascript.ru/">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option><option value="https://zh.javascript.info/async-await" selected>ç®€ä½“ä¸­æ–‡</option><option value="https://ja.javascript.info/async-await">æ—¥æœ¬èª</option></select></div></div></div><progress class="tutorial-progress" data-sticky value="5" max="5" data-tooltip="ç¬¬ 5 ç« ï¼Œç¬¬ 5 èŠ‚"></progress></div><div class="page page_sidebar_on page_inner_padding"><script>if(localStorage.noSidebar){document.querySelector(".page").classList.remove("page_sidebar_on");var pageWrapper=document.querySelector(".page-wrapper");pageWrapper&&pageWrapper.classList.remove("page-wrapper_sidebar_on")}setTimeout(function(){document.querySelector(".page").classList.add("page_sidebar-animation-on")},0);</script><div class="page__inner"><main class="main main_width-limit"><header class="main__header"><div class="main__header-inner"><ol class="breadcrumbs"><li class="breadcrumbs__item breadcrumbs__item_home" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb-1"><a class="breadcrumbs__link" href="index.htm" tppabs="https://zh.javascript.info/" itemprop="url"><span class="breadcrumbs__hidden-text" itemprop="title">æ•™ç¨‹</span></a></li><li class="breadcrumbs__item" id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemprop="child"><a class="breadcrumbs__link" href="async.htm" tppabs="https://zh.javascript.info/async" itemprop="url"><span itemprop="title">Promises, async/await</span></a></li></ol><h1 class="main__header-title">Async/await</h1></div></header><div class="content"><article class="formatted" itemscope itemtype="http://schema.org/TechArticle"><meta itemprop="name" content="Async/await"><div itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="email" content="iliakan@gmail.com"><meta itemprop="name" content="Ilya Kantor"></div><div itemprop="articleBody"><p>æœ‰ä¸€ç§ç‰¹æ®Šçš„è¯­æ³•å¯ç”¨ä¸€ç§æ›´èˆ’é€‚çš„æ–¹å¼ä½¿ç”¨ promiseï¼Œç§°ä¸º â€œasync/awaitâ€ã€‚å®ƒçš„æ˜“äºç†è§£å’Œä½¿ç”¨ç®€å•è®©äººæƒŠè®¶ã€‚</p>
<h2><a class="main__anchor" name="async-han-shu" href="#async-han-shu">Async å‡½æ•°</a></h2><p>æˆ‘ä»¬ä» <code>async</code> å…³é”®å­—å¼€å§‹ã€‚å®ƒå¯ä»¥æ”¾åœ¨å‡½æ•°å‰ï¼Œå°±åƒè¿™æ ·ï¼š</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">async function f() {
  return 1;
}</code></pre>
        </div>
      </div>
      
      </div><p>å‡½æ•°å‰çš„ â€œasyncâ€ æ„å‘³ç€ä¸€ä»¶ç®€å•çš„äº‹æƒ…ï¼šå‡½æ•°æ€»æ˜¯ä¼šè¿”å› promiseã€‚å¦‚æœä»£ç ä¸­æœ‰ <code>return &lt;non-promise&gt;</code>ï¼Œé‚£ä¹ˆ JavaScript å°±ä¼šè‡ªåŠ¨å°†å…¶å°è£…åˆ°ä¸€ä¸ªå¸¦æœ‰è¯¥å€¼çš„ resolved promise ä¸­ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸Šè¿°ä»£ç ä¸­è¿”å›ä¸€ä¸ªå¸¦æœ‰ç»“æœ <code>1</code> çš„ resolved promiseï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œæµ‹è¯•ï¼š</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">async function f() {
  return 1;
}

f().then(alert); // 1</code></pre>
        </div>
      </div>
      
      </div><p>â€¦æˆ‘ä»¬å¯ä»¥æ˜¾å¼çš„è¿”å›ä¸€ä¸ª promiseï¼Œç»“æœç›¸åŒï¼š</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">async function f() {
  return Promise.resolve(1);
}

f().then(alert); // 1</code></pre>
        </div>
      </div>
      
      </div><p>å› æ­¤ï¼Œ<code>async</code> ç¡®ä¿å‡½æ•°è¿”å›ä¸€ä¸ª promiseï¼Œå¹¶åœ¨å…¶ä¸­å°è£…é promiseã€‚å¾ˆç®€å•å¯¹å§ï¼Ÿä½†ä¸ä»…ä»…å¦‚æ­¤ã€‚å› ä¸ºè¿˜æœ‰ <code>await</code> å…³é”®å­—ï¼Œå®ƒåªåœ¨ <code>async</code> å‡½æ•°ä¸­å·¥ä½œï¼Œè€Œä¸”éå¸¸é…·ã€‚</p>
<h2><a class="main__anchor" name="await" href="#await">Await</a></h2><p>è¯­æ³•ï¼š</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">// åªåœ¨ async å‡½æ•°ä¸­å·¥ä½œ
let value = await promise;</code></pre>
        </div>
      </div>
      
      </div><p><code>await</code> å…³é”®å­—ä½¿ JavaScript ç­‰å¾…ï¼Œç›´åˆ° promise å¾—åˆ°è§£å†³å¹¶è¿”å›å…¶ç»“æœã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ª promise åœ¨ 1s ä¹‹å resolve çš„ä¾‹å­ï¼š</p>
<div data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:6,&quot;end&quot;:6}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">async function f() {

  let promise = new Promise((resolve, reject) =&gt; {
    setTimeout(() =&gt; resolve(&quot;done!&quot;), 1000)
  });

  let result = await promise; // ç­‰å¾…ï¼Œç›´åˆ° promise æ‰§è¡Œ resolves (*)

  alert(result); // â€œdoneï¼â€
}

f();</code></pre>
        </div>
      </div>
      
      </div><p>å‡½æ•°åœ¨ <code>(*)</code> è¡Œæ‰§è¡Œâ€œæš‚åœâ€ï¼Œå¹¶åœ¨ promise è¢«å¤„ç†æ—¶ç»§ç»­æ‰§è¡Œï¼Œ<code>result</code> å˜æˆå…¶ç»“æœã€‚ä¸Šè¿°ä»£ç åœ¨ä¸€ç§’å†…æ˜¾ç¤ºäº† â€œdone!â€</p>
<p>æˆ‘ä»¬å¼ºè°ƒï¼š<code>await</code> å­—é¢ä¸Šæ˜¯è®© JavaScript ç­‰å¾… promise å®Œæˆï¼Œç„¶åç»§ç»­å¤„ç†ç»“æœã€‚è¿™å¹¶ä¸ä¼šæ¶ˆè€— CPU èµ„æºï¼Œå› ä¸ºå¼•æ“å¯ä»¥åŒæ—¶å¤„ç†å…¶ä»–ä»»åŠ¡ï¼šæ‰§è¡Œå…¶ä»–è„šæœ¬ï¼Œå¤„ç†äº‹ä»¶ç­‰ã€‚</p>
<p>è¿™æ˜¯ä¸€ç§æ¯” <code>promise.then</code> æ›´ä¼˜é›…åœ°è·å– promise ç»“æœçš„è¯­æ³•ï¼Œå®ƒæ›´å®¹æ˜“é˜…è¯»å’Œç¼–å†™ã€‚</p>
<div class="important important_warn">
            <div class="important__header"><span class="important__type">ä¸èƒ½åœ¨å¸¸è§„å‡½æ•°ä¸­ä½¿ç”¨ <code>await</code></span></div>
            <div class="important__content"><p>å¦‚æœæˆ‘ä»¬å°è¯•åœ¨é async å‡½æ•°ä¸­ä½¿ç”¨ <code>await</code>ï¼Œå°±ä¼šäº§ç”Ÿè¯­æ³•é”™è¯¯ï¼š</p>
<div data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:2,&quot;end&quot;:2}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">function f() {
  let promise = Promise.resolve(1);
  let result = await promise; // è¯­æ³•é”™è¯¯
}</code></pre>
        </div>
      </div>
      
      </div><p>å¦‚æœæˆ‘ä»¬å¿˜è®°å°† <code>async</code> æ”¾åœ¨å‡½æ•°å‰ï¼Œæˆ‘ä»¬å°±ä¼šå¾—åˆ°è¿™æ ·çš„é”™è¯¯ã€‚å¦‚å‰é¢æ‰€è¯´çš„ï¼Œ<code>await</code> åªåœ¨ <code>async å‡½æ•°</code> ä¸­å·¥ä½œã€‚</p>
</div></div>
<p>æˆ‘ä»¬ç”¨ <a href="promise-chaining.htm" tppabs="https://zh.javascript.info/promise-chaining">Promises é“¾</a> ç« èŠ‚ <code>showAvatar()</code> ç¤ºä¾‹å¼€å§‹ï¼Œå¹¶ä½¿ç”¨ <code>async/await</code> é‡å†™å®ƒï¼š</p>
<ol>
<li>æˆ‘ä»¬éœ€è¦ç”¨ <code>await</code> æ›¿æ¢ <code>.then</code> è°ƒç”¨ã€‚</li>
<li>æ­¤å¤–ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ <code>async</code> å‡½æ•°æ¥å·¥ä½œã€‚</li>
</ol>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">async function showAvatar() {

  // è¯»å–æˆ‘ä»¬çš„ JSON
  let response = await fetch('/article/promise-chaining/user.json');
  let user = await response.json();

  // è¯»å– GitHub ç”¨æˆ·ä¿¡æ¯
  let githubResponse = await fetch(`https://api.github.com/users/${user.name}`);
  let githubUser = await githubResponse.json();

  // æ˜¾ç¤ºåŒ–èº«
  let img = document.createElement('img');
  img.src = githubUser.avatar_url;
  img.className = &quot;promise-avatar-example&quot;;
  document.body.append(img);

  // ç­‰å¾… 3 ç§’
  await new Promise((resolve, reject) =&gt; setTimeout(resolve, 3000));

  img.remove();

  return githubUser;
}

showAvatar();</code></pre>
        </div>
      </div>
      
      </div><p>éå¸¸æ•´æ´ï¼Œè€Œä¸”æ˜“äºé˜…è¯»ï¼Œå¯¹å§ï¼Ÿæ¯”ä¹‹å‰å¥½å¤šäº†ã€‚</p>
<div class="important important_smart">
            <div class="important__header"><span class="important__type"><code>await</code> åœ¨é¡¶å±‚ä»£ç ä¸­æ— æ•ˆ</span></div>
            <div class="important__content"><p>åˆšå¼€å§‹ä½¿ç”¨ <code>await</code> çš„æ–°æ‰‹å¾€å¾€ä¼šå¿˜è®°è¿™ä¸€ç‚¹ï¼Œä½†æˆ‘ä»¬ä¸èƒ½åœ¨æœ€é¡¶å±‚çš„ä»£ç ä¸­ç¼–å†™ <code>await</code>ï¼Œå› ä¸ºå®ƒä¼šæ— æ•ˆï¼š</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">// åœ¨é¡¶å±‚ä»£ç ä¸­å¯¼è‡´è¯­æ³•é”™è¯¯
let response = await fetch('/article/promise-chaining/user.json');
let user = await response.json();</code></pre>
        </div>
      </div>
      
      </div><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦å°† await ä»£ç å°è£…åœ¨ä¸€ä¸ªasync å‡½æ•°ä¸­ã€‚å°±åƒä¸Šè¿°ä¾‹å­ä¸€æ ·ã€‚</p>
</div></div>
<div class="important important_smart">
            <div class="important__header"><span class="important__type"><code>await</code> æ¥å— thenables</span></div>
            <div class="important__content"><p>åƒ <code>promise.then</code>ã€<code>await</code> å…è®¸ä½¿ç”¨ thenable å¯¹è±¡ï¼ˆé‚£äº›å…·æœ‰å¯è°ƒç”¨çš„ <code>then</code> æ–¹æ³•ï¼‰ã€‚åŒæ ·ï¼Œæˆ‘ä»¬çš„æƒ³æ³•æ˜¯ï¼Œç¬¬ä¸‰æ–¹å¯¹è±¡å¯èƒ½ä¸æ˜¯ promiseï¼Œè€Œæ˜¯ä¸ promise å…¼å®¹ï¼šå¦‚æœå®ƒæ”¯æŒ <code>.then</code>ï¼Œé‚£ä¹ˆå°±å¯ä»¥å’Œ <code>await</code> ä¸€èµ·ä½¿ç”¨ã€‚</p>
<p>ä¾‹å¦‚ï¼Œè¿™é‡Œçš„ <code>await</code> æ¥å— <code>new Thenable(1)</code>ï¼š</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">class Thenable {
  constructor(num) {
    this.num = num;
  }
  then(resolve, reject) {
    alert(resolve); // function() { native code }
    // åœ¨ 1000 ms åå°† this.num*2 ä½œä¸º resolve å€¼è¿”å›
    setTimeout(() =&gt; resolve(this.num * 2), 1000); // (*)
  }
};

async function f() {
  // ç­‰å¾… 1 ç§’åï¼Œç»“æœå˜æˆ 2
  let result = await new Thenable(1);
  alert(result);
}

f();</code></pre>
        </div>
      </div>
      
      </div><p>å¦‚æœ <code>await</code> è·å–äº†å¸¦æœ‰ <code>.then</code> çš„é promise å¯¹è±¡ï¼Œå®ƒå°±ä¼šè°ƒç”¨æä¾› <code>resolve</code>ã€<code>reject</code> ä½œä¸ºå‚æ•°çš„åŸç”Ÿå‡½æ•°ã€‚<code>await</code> ç­‰å¾…ï¼Œç›´åˆ°å…¶ä¸­ä¸€ä¸ªè¢«è°ƒç”¨ï¼ˆåœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œå‘ç”Ÿåœ¨ <code>(*)</code> è¡Œï¼‰ï¼Œç„¶åç»§ç»­å¤„ç†ç»“æœã€‚</p>
</div></div>
<div class="important important_smart">
            <div class="important__header"><span class="important__type">Async æ–¹æ³•</span></div>
            <div class="important__content"><p>ç±»æ–¹æ³•ä¹Ÿå¯ä»¥ asyncï¼Œåªè¦æŠŠ <code>async</code> æ”¾åœ¨ç±»æ–¹æ³•å‰å³å¯ã€‚</p>
<p>å°±åƒè¿™æ ·ï¼š</p>
<div data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:1,&quot;end&quot;:1}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">class Waiter {
  async wait() {
    return await Promise.resolve(1);
  }
}

new Waiter()
  .wait()
  .then(alert); // 1</code></pre>
        </div>
      </div>
      
      </div><p>æ„ä¹‰ç›¸åŒï¼šå®ƒç¡®ä¿è¿”å›å€¼æ˜¯ promiseï¼Œå¹¶ä½¿ <code>await</code> å¯ç”¨ã€‚</p>
</div></div>
<h2><a class="main__anchor" name="error-chu-li" href="#error-chu-li">Error å¤„ç†</a></h2><p>å¦‚æœä¸€ä¸ª promise æ­£å¸¸ resloveï¼Œé‚£ä¹ˆ <code>await promise</code> å°±ä¼šè¿”å›ç»“æœã€‚ä½†åœ¨ reject æƒ…å†µä¸‹ï¼Œå®ƒä¼šæŠ›å‡º errorï¼Œå°±åƒè¯¥è¡Œä¸Šæœ‰ <code>throw</code> è¯­å¥ä¸€æ ·ã€‚</p>
<p>ä»£ç ï¼š</p>
<div data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:1,&quot;end&quot;:1}]">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">async function f() {
  await Promise.reject(new Error(&quot;Whoops!&quot;));
}</code></pre>
        </div>
      </div>
      
      </div><p>â€¦ä¸æ­¤ç›¸åŒï¼š</p>
<div data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:1,&quot;end&quot;:1}]">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">async function f() {
  throw new Error(&quot;Whoops!&quot;);
}</code></pre>
        </div>
      </div>
      
      </div><p>åœ¨å®é™…æƒ…å†µä¸­ï¼Œpromise å¯èƒ½éœ€è¦ä¸€æ®µæ—¶é—´æ‰ä¼šå˜æˆ rejectã€‚å› æ­¤ <code>await</code> ä¼šç­‰å¾…ï¼Œç„¶åæŠ›å‡º errorã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>try..catch</code> æ¥æ•è·è¿™ä¸ª errorï¼Œå°±åƒå¸¸è§„ <code>throw</code> æ–¹æ³•ä¸€æ ·ï¼š</p>
<div data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:5,&quot;end&quot;:5}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">async function f() {

  try {
    let response = await fetch('http://no-such-url');
  } catch(err) {
    alert(err); // ç±»å‹é”™è¯¯ï¼šè·å–å¤±è´¥
  }
}

f();</code></pre>
        </div>
      </div>
      
      </div><p>å‡ºé”™æ—¶ï¼Œæ§åˆ¶æƒä¼šè¿›å…¥ <code>catch</code> å—ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥å°è£…å¤šè¡Œï¼š</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">async function f() {

  try {
    let response = await fetch('/no-user-here');
    let user = await response.json();
  } catch(err) {
    // catches errors both in fetch and response.json
    alert(err);
  }
}

f();</code></pre>
        </div>
      </div>
      
      </div><p>å¦‚æœæˆ‘ä»¬æ²¡æœ‰ <code>try..catch</code>ï¼Œé‚£ä¹ˆ async å‡½æ•° <code>f()</code> è°ƒç”¨æ‰€äº§ç”Ÿçš„ promise å°±ä¼šå˜ä¸º reject çŠ¶æ€ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿½åŠ  <code>.catch</code> æ¥å¤„ç†å®ƒï¼š</p>
<div data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:5,&quot;end&quot;:5}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">async function f() {
  let response = await fetch('http://no-such-url');
}

// f() å˜æˆä¸€ä¸ª rejected çŠ¶æ€çš„ promise
f().catch(alert); // ç±»å‹é”™è¯¯ï¼šæœªèƒ½è·å– // (*)</code></pre>
        </div>
      </div>
      
      </div><p>å¦‚æœå¿˜è®°åœ¨é‚£é‡Œæ·»åŠ  <code>.catch</code>ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¼šå¾—åˆ°ä¸€ä¸ªæœªå¤„ç†çš„ promise é”™è¯¯ï¼ˆå¯ä»¥åœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥åƒ <a href="promise-chaining.htm" tppabs="https://zh.javascript.info/promise-chaining">Promises é“¾</a> ç« èŠ‚æ‰€æè¿°çš„é‚£æ ·ï¼Œä½¿ç”¨ä¸€ä¸ªå…¨å±€äº‹ä»¶å¤„ç†å™¨æ¥æ•è·è¿™æ ·çš„ errorã€‚</p>
<div class="important important_smart">
            <div class="important__header"><span class="important__type"><code>async/await</code> å’Œ <code>promise.then/catch</code></span></div>
            <div class="important__content"><p>æˆ‘ä»¬ä½¿ç”¨ <code>async/await</code> æ—¶ï¼Œå‡ ä¹ä¸éœ€è¦ <code>.then</code>ï¼Œå› ä¸º <code>await</code> ä¸ºæˆ‘ä»¬å¤„ç†ç­‰å¾…ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>try..catch</code> æ›¿ä»£ <code>.catch</code>ã€‚ä½†è¿™é€šå¸¸ï¼ˆå¹¶ä¸æ€»æ˜¯ï¼‰æ›´æ–¹ä¾¿ã€‚</p>
<p>ä½†æ˜¯åœ¨ä»£ç çš„é¡¶å±‚ï¼Œå½“æˆ‘ä»¬åœ¨ <code>async</code> å‡½æ•°çš„å¤–éƒ¨æ—¶ï¼Œæˆ‘ä»¬åœ¨è¯­æ³•ä¸Šæ˜¯ä¸èƒ½ä½¿ç”¨ <code>await</code> çš„ï¼Œæ‰€ä»¥é€šå¸¸æ·»åŠ  <code>.then/catch</code> å»å¤„ç†æœ€ç»ˆç»“æœæˆ–è€… errorã€‚</p>
<p>ä¸ä¸Šè¿°ç¤ºä¾‹çš„ <code>(*)</code> è¡Œä¸€æ ·ã€‚</p>
</div></div>
<div class="important important_smart">
            <div class="important__header"><span class="important__type"><code>async/await</code> å¯ä»¥å¾ˆå¥½çš„ä¸ <code>Promise.all</code> ååŒå·¥ä½œ</span></div>
            <div class="important__content"><p>å½“æˆ‘ä»¬éœ€è¦ç­‰å¾…å¤šä¸ª promise æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒä»¬å°è£…è¿› <code>Promise.all</code> ç„¶å <code>await</code>ï¼š</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">// wait for the array of results
let results = await Promise.all([
  fetch(url1),
  fetch(url2),
  ...
]);</code></pre>
        </div>
      </div>
      
      </div><p>äº§ç”Ÿ error çš„æƒ…å†µä¸‹ï¼Œå®ƒä¼šåƒå¾€å¸¸ä¸€æ ·ä¼ è¾“ï¼šä»å¤±è´¥çš„ promise åˆ° <code>Promise.all</code>ï¼Œç„¶åå˜æˆä¸€ä¸ªæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>try..catch</code> æ•è·çš„å¼‚å¸¸ã€‚</p>
</div></div>
<h2><a class="main__anchor" name="zong-jie" href="#zong-jie">æ€»ç»“</a></h2><p>å‡½æ•°å‰çš„ <code>async</code> å…³é”®å­—æœ‰ä¸¤ä¸ªä½œç”¨ï¼š</p>
<ol>
<li>æ€»æ˜¯è¿”å› promiseã€‚</li>
<li>å…è®¸åœ¨å…¶ä¸­ä½¿ç”¨ <code>await</code>ã€‚</li>
</ol>
<p>åœ¨ promise ä¹‹å‰çš„ <code>await</code> å…³é”®å­—ï¼Œä½¿ JavaScript ç­‰å¾… promise è¢«å¤„ç†ï¼Œç„¶åï¼š</p>
<ol>
<li>å¦‚æœæœ‰ errorï¼Œå°±ä¼šäº§ç”Ÿå¼‚å¸¸ï¼Œå°±åƒåœ¨é‚£ä¸ªåœ°æ–¹è°ƒç”¨äº† <code>throw error</code> ä¸€æ ·ã€‚</li>
<li>å¦åˆ™ï¼Œå°±ä¼šè¿”å›å€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç»™å®ƒåˆ†é…ä¸€ä¸ªå€¼ã€‚</li>
</ol>
<p>å®ƒä»¬ä¸€èµ·ä¸ºç¼–å†™æ˜“äºè¯»å†™çš„å¼‚æ­¥ä»£ç æä¾›äº†ä¸€ä¸ªå¾ˆå¥½çš„æ¡†æ¶ã€‚</p>
<p>å¯¹äº <code>async/await</code>ï¼Œæˆ‘ä»¬å¾ˆå°‘éœ€è¦ç¼–å†™ <code>promise.then/catch</code>ï¼Œä½†æˆ‘ä»¬ä¸åº”è¯¥å¿˜è®°å®ƒä»¬æ˜¯åŸºäº promise çš„ã€‚å› ä¸ºæœ‰æ—¶ï¼ˆä¾‹å¦‚ï¼Œåœ¨æœ€å¤–é¢çš„èŒƒå›´ï¼‰æˆ‘ä»¬ä¸å¾—ä¸ä½¿ç”¨è¿™äº›æ–¹æ³•ã€‚<code>Promise.all</code> ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¸œè¥¿ï¼Œå®ƒèƒ½å¤ŸåŒæ—¶ç­‰å¾…å¾ˆå¤šä»»åŠ¡ã€‚</p>
</div></article><div class="tasks formatted"><h2 class="tasks__title" id="tasks"><a class="tasks__title-anchor main__anchor main__anchor main__anchor_noicon" href="#tasks">ä»»åŠ¡</a></h2><div class="task tasks__task"><div class="task__header"><div class="task__title-wrap"><h3 class="task__title"><a class="main__anchor" href="#zhong-xie-rethrowasyncawait" name="zhong-xie-rethrowasyncawait">é‡å†™ &quot;rethrow&quot; async/await</a></h3><a class="task__open-link" href="task/rewrite-async-2.htm" tppabs="https://zh.javascript.info/task/rewrite-async-2" target="_blank"></a></div><div class="task__header-note"></div><div class="task__content"><p>ä¸‹é¢ä½ å¯ä»¥ä» <a href="promise-chaining.htm" tppabs="https://zh.javascript.info/promise-chaining">Promises é“¾</a> ç« èŠ‚ä¸­æ‰¾åˆ° â€œrethrowâ€ ç¤ºä¾‹ã€‚æˆ‘ä»¬ä½¿ç”¨ <code>async/await</code> æ›¿æ¢ <code>.then/catch</code> å¹¶é‡å†™è¯¥ç¤ºä¾‹ã€‚</p>
<p>ä¸ºäº†æ”¯æŒ <code>demoGithubUser</code> ä¸­çš„å¾ªç¯ï¼Œæˆ‘ä»¬æ¶ˆé™¤äº†é€’å½’ï¼šä½¿ç”¨ <code>async/await</code> ä¼šå¾ˆå®¹æ˜“å®ç°ã€‚</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">class HttpError extends Error {
  constructor(response) {
    super(`${response.status} for ${response.url}`);
    this.name = 'HttpError';
    this.response = response;
  }
}

function loadJson(url) {
  return fetch(url)
    .then(response =&gt; {
      if (response.status == 200) {
        return response.json();
      } else {
        throw new HttpError(response);
      }
    })
}

// Ask for a user name until github returns a valid user
function demoGithubUser() {
  let name = prompt(&quot;Enter a name?&quot;, &quot;iliakan&quot;);

  return loadJson(`https://api.github.com/users/${name}`)
    .then(user =&gt; {
      alert(`Full name: ${user.name}.`);
      return user;
    })
    .catch(err =&gt; {
      if (err instanceof HttpError &amp;&amp; err.response.status == 404) {
        alert(&quot;No such user, please reenter.&quot;);
        return demoGithubUser();
      } else {
        throw err;
      }
    });
}

demoGithubUser();</code></pre>
        </div>
      </div>
      
      </div><button class="task__solution" type="button">è§£å†³æ–¹æ¡ˆ</button><div class="task__answer"><div class="task__answer-content"><p>è¿™é‡Œæ²¡æœ‰çªé—¨ï¼Œåªæ˜¯åœ¨ <code>demoGithubUser</code> ä¸­ä½¿ç”¨ <code>try...catch</code> æ›¿æ¢ <code>.catch</code> å¹¶åœ¨éœ€è¦çš„åœ°æ–¹æ·»åŠ  <code>async/await</code>ï¼š</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">class HttpError extends Error {
  constructor(response) {
    super(`${response.status} for ${response.url}`);
    this.name = 'HttpError';
    this.response = response;
  }
}

async function loadJson(url) {
  let response = await fetch(url);
  if (response.status == 200) {
    return response.json();
  } else {
    throw new HttpError(response);
  }
}

// Ask for a user name until github returns a valid user
async function demoGithubUser() {

  let user;
  while(true) {
    let name = prompt(&quot;Enter a name?&quot;, &quot;iliakan&quot;);

    try {
      user = await loadJson(`https://api.github.com/users/${name}`);
      break; // no error, exit loop
    } catch(err) {
      if (err instanceof HttpError &amp;&amp; err.response.status == 404) {
        // loop continues after the alert
        alert(&quot;No such user, please reenter.&quot;);
      } else {
        // unknown error, rethrow
        throw err;
      }
    }
  }


  alert(`Full name: ${user.name}.`);
  return user;
}

demoGithubUser();</code></pre>
        </div>
      </div>
      
      </div></div><button class="close-button task__answer-close" type="button" title="å…³é—­"></button></div></div></div></div><div class="task tasks__task"><div class="task__header"><div class="task__title-wrap"><h3 class="task__title"><a class="main__anchor" href="#shi-yong-asyncawait-zhong-xie" name="shi-yong-asyncawait-zhong-xie">ä½¿ç”¨ async/await é‡å†™</a></h3><a class="task__open-link" href="task/rewrite-async.htm" tppabs="https://zh.javascript.info/task/rewrite-async" target="_blank"></a></div><div class="task__header-note"></div><div class="task__content"><p>ä½¿ç”¨ <code>async/await</code> æ¥æ›¿æ¢ <code>.then/catch</code> é‡å†™ <a href="promise-chaining.htm" tppabs="https://zh.javascript.info/promise-chaining">Promises é“¾</a> ç« èŠ‚çš„ä¸€ä¸ªç¤ºä¾‹ï¼š</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">function loadJson(url) {
  return fetch(url)
    .then(response =&gt; {
      if (response.status == 200) {
        return response.json();
      } else {
        throw new Error(response.status);
      }
    })
}

loadJson('no-such-user.json') // (3)
  .catch(alert); // Error: 404</code></pre>
        </div>
      </div>
      
      </div><button class="task__solution" type="button">è§£å†³æ–¹æ¡ˆ</button><div class="task__answer"><div class="task__answer-content"><p>æ³¨é‡Šåœ¨ä»£ç çš„ä¸‹é¢ï¼š</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">async function loadJson(url) { // (1)
  let response = await fetch(url); // (2)

  if (response.status == 200) {
    let json = await response.json(); // (3)
    return json;
  }

  throw new Error(response.status);
}

loadJson('no-such-user.json')
  .catch(alert); // Error: 404 (4)</code></pre>
        </div>
      </div>
      
      </div><p>æ³¨é‡Šï¼š</p>
<ol>
<li>
<p>å‡½æ•° <code>loadUrl</code> å˜æˆäº† <code>async</code>ã€‚</p>
</li>
<li>
<p>æ‰€æœ‰å†…éƒ¨ <code>.then</code> éƒ½ç”¨ <code>await</code> è¿›è¡Œæ›¿æ¢ã€‚</p>
</li>
<li>
<p>æˆ‘ä»¬å¯ä»¥ <code>return response.json()</code> è€Œä¸æ˜¯ç­‰å¾…ï¼Œå°±åƒè¿™æ ·ï¼š</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">if (response.status == 200) {
  return response.json(); // (3)
}</code></pre>
        </div>
      </div>
      
      </div><p>é‚£ä¹ˆå¤–éƒ¨ä»£ç å¿…é¡» <code>await</code> æ‰€æœ‰ promise çŠ¶æ€ä¸º resolveã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­è¿™æ²¡å…³ç³»ã€‚</p>
</li>
<li>
<p><code>loadJson</code> æŠ›å‡ºçš„é”™è¯¯ç”± <code>.catch</code> å¤„ç†ã€‚æˆ‘ä»¬ä¸èƒ½ä½¿ç”¨ <code>await loadJson(â€¦)</code>ï¼Œå› ä¸ºæˆ‘ä»¬ä¸åœ¨ <code>async</code> å‡½æ•°ä¸­ã€‚</p>
</li>
</ol>
</div><button class="close-button task__answer-close" type="button" title="å…³é—­"></button></div></div></div></div></div></div><div class="page__nav-wrap"><a class="page__nav page__nav_prev" href="promise-api.htm" tppabs="https://zh.javascript.info/promise-api" data-tooltip="Promise API"><span class="page__nav-text"><span class="page__nav-text-shortcut"></span></span><span class="page__nav-text-alternate">ä¸Šä¸€èŠ‚</span></a><a class="page__nav page__nav_next" href="network.htm" tppabs="https://zh.javascript.info/network" data-tooltip="ç½‘ç»œè¯·æ±‚ï¼šAJAX å’Œ COMET"><span class="page__nav-text"><span class="page__nav-text-shortcut"></span></span><span class="page__nav-text-alternate">ä¸‹ä¸€èŠ‚</span></a></div><div class="article-tablet-foot tablet-only"><div class="article-tablet-foot__layout"><div class="share-icons"><span class="share-icons__title">åˆ†äº«</span><a class="share share_tw" href="javascript:if(confirm('https://twitter.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fasync-await  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://twitter.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fasync-await'" tppabs="https://twitter.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fasync-await"></a><a class="share share_fb" href="javascript:if(confirm('https://www.facebook.com/sharer/sharer.php?s=100&p%5Burl%5D=https%3A%2F%2Fzh.javascript.info%2Fasync-await  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.facebook.com/sharer/sharer.php?s=100&p%5Burl%5D=https%3A%2F%2Fzh.javascript.info%2Fasync-await'" tppabs="https://www.facebook.com/sharer/sharer.php?s=100&p%5Burl%5D=https%3A%2F%2Fzh.javascript.info%2Fasync-await"></a><a class="share share_gp" href="javascript:if(confirm('https://plus.google.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fasync-await  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://plus.google.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fasync-await'" tppabs="https://plus.google.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fasync-await"></a><a class="share share_vk" href="javascript:if(confirm('https://vkontakte.ru/share.php?url=https%3A%2F%2Fzh.javascript.info%2Fasync-await  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://vkontakte.ru/share.php?url=https%3A%2F%2Fzh.javascript.info%2Fasync-await'" tppabs="https://vkontakte.ru/share.php?url=https%3A%2F%2Fzh.javascript.info%2Fasync-await"></a></div><div class="article-tablet-foot__map"><a class="map" href="tutorial/map.htm" tppabs="https://zh.javascript.info/tutorial/map" data-action="tutorial-map"><span class="map__text">æ•™ç¨‹è·¯çº¿å›¾</span></a></div></div></div><div class="comments formatted" id="comments"><div class="comments__header"><h2 class="comments__header-title"><a href="#comments" name="comments">è¯„è®º</a></h2><div class="comments__read-before"><span class="comments__read-before-link">åœ¨è¯„è®ºä¹‹å‰å…ˆé˜…è¯»æœ¬å†…å®¹â€¦</span><div class="comments__read-before-popup"><div class="comments__read-before-popup-i"><ul><li>æ¬¢è¿ä½ åœ¨æ–‡ç« ä¸‹æ·»åŠ è¡¥å……å†…å®¹ã€æå‡ºä½ çš„é—®é¢˜æˆ–å›ç­”æå‡ºçš„é—®é¢˜ã€‚</li><li>ä½¿ç”¨ <code>&lt;code&gt;</code> æ ‡ç­¾æ’å…¥å‡ è¡Œä»£ç ï¼Œå¯¹äºå¤šè¡Œä»£ç  â€” å¯ä»¥ä½¿ç”¨ <code>&lt;pre&gt;</code>ï¼Œå¯¹äºè¶…è¿‡åè¡Œçš„ä»£ç  â€” å»ºè®®ä½¿ç”¨æ²™ç®±ï¼ˆ<a href="javascript:if(confirm('http://plnkr.co/edit/?p=preview  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://plnkr.co/edit/?p=preview'" tppabs="http://plnkr.co/edit/?p=preview">plnkr</a>ã€<a href="javascript:if(confirm('http://jsbin.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://jsbin.com/'" tppabs="http://jsbin.com/">JSBin</a> å’Œ <a href="javascript:if(confirm('http://codepen.io/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://codepen.io/'" tppabs="http://codepen.io/">codepen</a> ç­‰ï¼‰ã€‚</li><li>å¦‚æœä½ æ— æ³•ç†è§£æ–‡ç« ä¸­çš„å†…å®¹ â€” è¯·è¯¦ç»†è¯´æ˜ã€‚</li></ul></div></div></div></div><div id="disqus_thread"></div><script>var disqus_config = function() { if (!this.page) this.page = {}; Object.assign(this.page, {"url":"https:\/\/zh.javascript.info\/async-await","identifier":"\/async-await"}); };</script><script>var disqus_shortname = "zh-javascript-info";</script><script>var disqus_enabled = true;</script></div></main></div><div class="sidebar page__sidebar sidebar sidebar_sticky-footer"><button class="sidebar__toggle" data-sidebar-toggle></button><a class="map" href="tutorial/map.htm" tppabs="https://zh.javascript.info/tutorial/map" data-action="tutorial-map" data-tooltip="æ•™ç¨‹è·¯çº¿å›¾"></a><div class="sidebar__inner"><div class="sidebar__content"><div class="sidebar__section"><h4 class="sidebar__section-title">ç« èŠ‚</h4><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="async.htm" tppabs="https://zh.javascript.info/async">Promises, async/await</a></li></ul></nav></div><div class="sidebar__section"><h4 class="sidebar__section-title">è¯¾ç¨‹å¯¼èˆª</h4><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="#async-han-shu">Async å‡½æ•°</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#await">Await</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#error-chu-li">Error å¤„ç†</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#zong-jie">æ€»ç»“</a></li></ul></nav></div><div class="sidebar__section"><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="#tasks">ä»»åŠ¡ (2)</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#comments">è¯„è®º</a></li></ul></nav></div><div class="sidebar__section"><div class="sidebar__section-title">åˆ†äº«</div><a class="share share_tw sidebar__share" href="javascript:if(confirm('https://twitter.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fasync-await  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://twitter.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fasync-await'" tppabs="https://twitter.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fasync-await"></a><a class="share share_fb sidebar__share" href="javascript:if(confirm('https://www.facebook.com/sharer/sharer.php?s=100&p[url]=https%3A%2F%2Fzh.javascript.info%2Fasync-await  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.facebook.com/sharer/sharer.php?s=100&p[url]=https%3A%2F%2Fzh.javascript.info%2Fasync-await'" tppabs="https://www.facebook.com/sharer/sharer.php?s=100&p[url]=https%3A%2F%2Fzh.javascript.info%2Fasync-await"></a><a class="share share_gp sidebar__share" href="javascript:if(confirm('https://plus.google.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fasync-await  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://plus.google.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fasync-await'" tppabs="https://plus.google.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fasync-await"></a></div><div class="sidebar__section"><a class="sidebar__link" href="javascript:if(confirm('https://github.com/xitu/javascript-tutorial-zh/blob/zh-hans/6-async/05-async-await/article.md  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/xitu/javascript-tutorial-zh/blob/zh-hans/6-async/05-async-await/article.md'" tppabs="https://github.com/xitu/javascript-tutorial-zh/blob/zh-hans/6-async/05-async-await/article.md">åœ¨ Github ä¸Šç¼–è¾‘</a></div></div></div></div></div></div><div class="page-footer"><div class="page-footer__left"><ul class="page-footer__list"><li class="page-footer__item">Â©&nbsp;2007â€”2018&nbsp; Ilya Kantor</li><li class="page-footer__item"><a class="page-footer__link" href="about.htm#contact-us" tppabs="https://zh.javascript.info/about#contact-us">è”ç³»æˆ‘ä»¬</a></li><li class="page-footer__item"><a class="page-footer__link" href="about.htm" tppabs="https://zh.javascript.info/about">å…³äºæœ¬é¡¹ç›®</a></li></ul></div><div class="page-footer__right"><ul class="page-footer__list"><li><a class="page-footer__link" rel="nofollow" href="javascript:if(confirm('http://github.com/iliakan/javascript-tutorial-zh  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://github.com/iliakan/javascript-tutorial-zh'" tppabs="http://github.com/iliakan/javascript-tutorial-zh">open source</a></li></ul></div></div></body></html>