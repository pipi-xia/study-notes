<!DOCTYPE html><html lang="zh"><head><meta http-equiv=Content-Type content='text/html; charset=utf-8'>
<script>window.currentUser = null;</script><script>window.rateUsdToNative = 6.8872;</script><title itemprop="name">Promises é“¾</title><link href="pack/styles.9ab2708780c33bc8dadc.css" tppabs="https://zh.javascript.info/pack/styles.9ab2708780c33bc8dadc.css" rel="stylesheet"><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes, minimum-scale=1.0"><meta name="apple-mobile-web-app-capable" content="yes"><!-- chrome autotranslate is enabled only for "en" main version--><meta name="google" content="notranslate"><script>if (window.devicePixelRatio > 1) document.cookie = 'pixelRatio=' + window.devicePixelRatio + ';path=/;expires=Tue, 19 Jan 2038 03:14:07 GMT';</script><link href="../fonts.googleapis.com/css-family=Open+Sans-400italic,700italic,400,700-Open+Sans+Condensed-700&subset=latin,latin-ext,cyrillic,cyrillic-ext.css" tppabs="https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700%7COpen+Sans+Condensed:700&subset=latin,latin-ext,cyrillic,cyrillic-ext" rel="stylesheet"><link rel="apple-touch-icon-precomposed" href="/img/favicon/apple-touch-icon-precomposed.png"><link rel="canonical" href="https://zh.javascript.info/promise-chaining"><meta name="msapplication-TileColor" content="#222A2C"><meta name="msapplication-TileImage" content="/img/favicon/tileicon.png"><link rel="icon" href="/img/favicon/favicon.png"><meta itemprop="image" content="https://zh.javascript.info/img/site_preview_en_512x512.png"><meta property="og:title" content="Promises é“¾"><meta property="og:image" content="https://zh.javascript.info/img/site_preview_en_1200x630.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="fb:admins" content="100001562528165"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Promises é“¾"><meta name="twitter:site" content="@iliakan"><meta name="twitter:creator" content="@iliakan"><meta name="twitter:image" content="https://zh.javascript.info/img/site_preview_en_512x512.png"><link rel="prev" href="/promise-basics"><link rel="next" href="/promise-api"><script>window.GA_ID = "UA-2056213-15";</script><script>window.YANDEX_METRIKA_ID = 32184394;</script><script>window.GoogleAnalyticsObject="ga",window.ga=function(){window.ga.q.push(arguments)},window.ga.q=[],window.ga.l=Date.now(),ga("create",GA_ID,"auto"),window.GTM_ID&&ga("require",GTM_ID),window.currentUser?ga("set","&uid",currentUser.id):ga("set","anonymizeIp",!0),window.addEventListener("error",function(e){var r=(e.filename||e.errorUrl)+": "+(e.lineno||e.errorLine),n=e.stack||e.error&&e.error.stack;ga("send","exception",{exDescription:e.message+" "+r+" "+n,exFatal:!0})});</script><script src="../www.google-analytics.com/analytics.js" tppabs="https://www.google-analytics.com/analytics.js" async></script><script>ga('send', 'pageview');</script><script>window.metrika={reachGoal:function(){}},window.yandex_metrika_callbacks=[function(){try{window.metrika=new Ya.Metrika({id:YANDEX_METRIKA_ID,webvisor:!0,clickmap:!0,params:{user:window.currentUser&&window.currentUser.id}}),metrika.trackLinks({delay:150}),window.addEventListener("error",function(r){window.metrika.reachGoal("JSERROR",{src:(r.filename||r.errorUrl)+": "+(r.lineno||r.errorLine),stack:r.stack||r.error&&r.error.stack,message:r.message})})}catch(r){}}];</script><script src="../mc.yandex.ru/metrika/watch.js" tppabs="https://mc.yandex.ru/metrika/watch.js" async></script><script>window.RECAPTCHA_ID = "6Lf9NyETAAAAACZlg-a9Us2SxvYbeVC1ROWaWv4O";</script><script src="pack/init.9ab2708780c33bc8dadc.js" tppabs="https://zh.javascript.info/pack/init.9ab2708780c33bc8dadc.js"></script><script src="pack/head.9ab2708780c33bc8dadc.js" tppabs="https://zh.javascript.info/pack/head.9ab2708780c33bc8dadc.js" defer></script><script>
function loadScript(src) {
  return new Promise(function(resolve, reject) {
    let script = document.createElement('script');
    script.src = src;

    script.onload = () => resolve(script);
    script.onerror = () => reject(new Error("Script load error: " + src));

    document.head.append(script);
  });
}

class HttpError extends Error {
  constructor(response) {
    super(`${response.status} for ${response.url}`);
    this.name = 'HttpError';
    this.response = response;
  }
}

function loadJson(url) {
  return fetch(url)
    .then(response => {
      if (response.status == 200) {
        return response.json();
      } else {
        throw new HttpError(response);
      }
    })
}
</script>

<style>
.promise-avatar-example {
  border-radius: 50%;
  position: fixed;
  left: 10px;
  top: 10px;
}
</style>
<meta property="og:title" content="Promises é“¾"><meta property="og:type" content="article"><script src="pack/tutorial.9ab2708780c33bc8dadc.js" tppabs="https://zh.javascript.info/pack/tutorial.9ab2708780c33bc8dadc.js" defer></script><script src="pack/footer.9ab2708780c33bc8dadc.js" tppabs="https://zh.javascript.info/pack/footer.9ab2708780c33bc8dadc.js" defer></script></head><body class="no-icons"><script>window.fontTest();</script><div class="page-wrapper page-wrapper_sidebar_on"><!--[if lt IE 10]><div style="color:red;text-align:center">å¾ˆæŠ±æ­‰ï¼Œæˆ‘ä»¬ä¸æ”¯æŒ IE&lt;10 ç­‰æµè§ˆå™¨ï¼Œè¯·ä½¿ç”¨ä¸€ä¸ªæ›´æ–°ç‰ˆæœ¬çš„æµè§ˆå™¨ã€‚</div><![endif]--><div class="sitetoolbar sitetoolbar_tutorial"><div class="sitetoolbar__content"><div class="sitetoolbar__lang-switcher"><button class="sitetoolbar__dropdown-button" data-dropdown-toggler>ZH</button><div class="sitetoolbar__dropdown-wrap"><div class="sitetoolbar__dropdown-body"><div class="sitetoolbar__lang-switcher-body"><div class="supported-langs supported-langs_toolbar"><div class="supported-langs__text">æˆ‘ä»¬å¸Œæœ›å°†è¿™ä¸ªå¼€æºé¡¹ç›®æä¾›ç»™å…¨ä¸–ç•Œçš„äººã€‚è¯·å¸®åŠ©æˆ‘ä»¬å°†æ•™ç¨‹çš„å†…å®¹ <a href="javascript:if(confirm('https://github.com/iliakan/javascript-tutorial-en  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/iliakan/javascript-tutorial-en'" tppabs="https://github.com/iliakan/javascript-tutorial-en" rel="noopener noreferrer" target="_blank">ç¿»è¯‘ä¸ºä½ æ‰€æŒæ¡çš„è¯­è¨€</a> å¯¹åº”çš„ç‰ˆæœ¬ã€‚</div><div class="supported-langs__container"><ul class="supported-langs__list" style="height:128px"><li class="supported-langs__item"><a class="supported-langs__link" href="javascript:if(confirm('https://javascript.info/promise-chaining  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://javascript.info/promise-chaining'" tppabs="https://javascript.info/promise-chaining"><span class="supported-langs__brief">EN</span><span class="supported-langs__title">English</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="javascript:if(confirm('https://learn.javascript.ru/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://learn.javascript.ru/'" tppabs="https://learn.javascript.ru/"><span class="supported-langs__brief">RU</span><span class="supported-langs__title">Ğ ÑƒÑÑĞºĞ¸Ğ¹</span></a></li><li class="supported-langs__item supported-langs__item_current"><a class="supported-langs__link" href="promise-chaining.htm" tppabs="https://zh.javascript.info/promise-chaining"><span class="supported-langs__brief">ZH</span><span class="supported-langs__title">ç®€ä½“ä¸­æ–‡</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="javascript:if(confirm('https://ja.javascript.info/promise-chaining  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://ja.javascript.info/promise-chaining'" tppabs="https://ja.javascript.info/promise-chaining"><span class="supported-langs__brief">JA</span><span class="supported-langs__title">æ—¥æœ¬èª</span></a></li></ul></div></div></div></div></div></div><div class="sitetoolbar__logo-wrap"><a class="sitetoolbar__link sitetoolbar__link_logo" href="index.htm" tppabs="https://zh.javascript.info/"><img class="sitetoolbar__logo sitetoolbar__logo_normal" src="img/sitetoolbar__logo_en.svg" tppabs="https://zh.javascript.info/img/sitetoolbar__logo_en.svg" width="200" alt="" role="presentation"/><img class="sitetoolbar__logo sitetoolbar__logo_small" src="img/sitetoolbar__logo_small_en.svg" tppabs="https://zh.javascript.info/img/sitetoolbar__logo_small_en.svg" width="70" alt="" role="presentation"/><script>Array.prototype.forEach.call(document.querySelectorAll("img.sitetoolbar__logo"),function(e){let t=document.createElement("object");t.type="image/svg+xml",t.className=e.className,t.style.cssText="left:0;top:0;position:absolute",t.onload=function(){t.onload=null,e.style.visibility="hidden"},t.data=e.src,e.parentNode.insertBefore(t,e)});</script></a></div><div class="sitetoolbar__nav-toggle-wrap"><button class="sitetoolbar__nav-toggle" type="button"></button></div><nav class="sitetoolbar__sections"><ul class="sitetoolbar__sections-list"></ul></nav><div class="sitetoolbar__book-wrap"><a class="buy-book-button" href="ebook.htm" tppabs="https://zh.javascript.info/ebook"><span class="buy-book-button__extra-text">è´­ä¹°</span>EPUB/PDF</a></div><div class="sitetoolbar__search-wrap"><div class="sitetoolbar__search-content"><form class="sitetoolbar__search" method="GET" action="https://zh.javascript.info/search"><button class="sitetoolbar__search-toggle" type="button"></button><div class="sitetoolbar__search-input"><div class="text-input"><input class="text-input__control" name="query" placeholder="åœ¨ Javascript.info ç½‘ç«™ä¸­æœç´¢" required="required" type="text"/></div><button class="sitetoolbar__find" type="submit">æœç´¢</button></div></form></div></div></div><div class="tablet-menu"><div class="tablet-menu__line"><div class="tablet-menu__content"><form class="tablet-menu-search" action="https://zh.javascript.info/search/"><input class="tablet-menu-search__input" type="search" name="query" placeholder="åœ¨æ•™ç¨‹ä¸­æœç´¢" required="required"/><button class="tablet-menu-search__button" type="submit" name="type" value="articles">æœç´¢</button></form></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><a class="map" href="tutorial/map.htm" tppabs="https://zh.javascript.info/tutorial/map" data-action="tutorial-map"><span class="map__text">æ•™ç¨‹è·¯çº¿å›¾</span></a></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><div class="share-icons"><span class="share-icons__title">åˆ†äº«</span><a class="share share_tw" href="javascript:if(confirm('https://twitter.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://twitter.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining'" tppabs="https://twitter.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining"></a><a class="share share_fb" href="javascript:if(confirm('https://www.facebook.com/sharer/sharer.php?s=100&p%5Burl%5D=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.facebook.com/sharer/sharer.php?s=100&p%5Burl%5D=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining'" tppabs="https://www.facebook.com/sharer/sharer.php?s=100&p%5Burl%5D=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining"></a><a class="share share_gp" href="javascript:if(confirm('https://plus.google.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://plus.google.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining'" tppabs="https://plus.google.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining"></a><a class="share share_vk" href="javascript:if(confirm('https://vkontakte.ru/share.php?url=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://vkontakte.ru/share.php?url=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining'" tppabs="https://vkontakte.ru/share.php?url=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining"></a></div></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><select class="tablet-menu__nav input-select input-select input-select_small" onchange="if(this.value) window.location.href=this.value"><option value="https://javascript.info/promise-chaining">English</option><option value="https://learn.javascript.ru/">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option><option value="https://zh.javascript.info/promise-chaining" selected>ç®€ä½“ä¸­æ–‡</option><option value="https://ja.javascript.info/promise-chaining">æ—¥æœ¬èª</option></select></div></div></div><progress class="tutorial-progress" data-sticky value="3" max="5" data-tooltip="ç¬¬ 5 ç« ï¼Œç¬¬ 3 èŠ‚"></progress></div><div class="page page_sidebar_on page_inner_padding"><script>if(localStorage.noSidebar){document.querySelector(".page").classList.remove("page_sidebar_on");var pageWrapper=document.querySelector(".page-wrapper");pageWrapper&&pageWrapper.classList.remove("page-wrapper_sidebar_on")}setTimeout(function(){document.querySelector(".page").classList.add("page_sidebar-animation-on")},0);</script><div class="page__inner"><main class="main main_width-limit"><header class="main__header"><div class="main__header-inner"><ol class="breadcrumbs"><li class="breadcrumbs__item breadcrumbs__item_home" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb-1"><a class="breadcrumbs__link" href="index.htm" tppabs="https://zh.javascript.info/" itemprop="url"><span class="breadcrumbs__hidden-text" itemprop="title">æ•™ç¨‹</span></a></li><li class="breadcrumbs__item" id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemprop="child"><a class="breadcrumbs__link" href="async.htm" tppabs="https://zh.javascript.info/async" itemprop="url"><span itemprop="title">Promises, async/await</span></a></li></ol><h1 class="main__header-title">Promises é“¾</h1></div></header><div class="content"><article class="formatted" itemscope itemtype="http://schema.org/TechArticle"><meta itemprop="name" content="Promises é“¾"><div itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="email" content="iliakan@gmail.com"><meta itemprop="name" content="Ilya Kantor"></div><div itemprop="articleBody"><p>æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ <a href="callbacks.htm" tppabs="https://zh.javascript.info/callbacks">ç®€ä»‹ï¼šå›è°ƒ</a> ç« èŠ‚æåŠçš„é—®é¢˜ã€‚</p>
<ul>
<li>å‡å¦‚æˆ‘ä»¬æœ‰ä¸€ç³»åˆ—å¼‚æ­¥ä»»åŠ¡ä¼šè¢«ä¾æ¬¡å®Œæˆã€‚ä¾‹å¦‚ï¼šåŠ è½½è„šæœ¬ã€‚</li>
<li>å¦‚ä½•ç¼–å†™åˆé€‚çš„ä»£ç ï¼Ÿ</li>
</ul>
<p>Promises æä¾›äº†å‡ ç§æ–¹æ¡ˆæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>æœ¬ç« èŠ‚ä¸­æˆ‘ä»¬æ¥è®²è§£ promise é“¾ã€‚</p>
<p>å®ƒçœ‹èµ·æ¥å°±åƒè¿™æ ·ï¼š</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">new Promise(function(resolve, reject) {

  setTimeout(() =&gt; resolve(1), 1000); // (*)

}).then(function(result) { // (**)

  alert(result); // 1
  return result * 2;

}).then(function(result) { // (***)

  alert(result); // 2
  return result * 2;

}).then(function(result) {

  alert(result); // 4
  return result * 2;

});</code></pre>
        </div>
      </div>
      
      </div><p>å®ƒçš„ç†å¿µæ˜¯æŠŠ result ä¼ å…¥ <code>.then</code> çš„å¤„ç†ç¨‹åºé“¾ã€‚</p>
<p>è¿è¡Œæµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>åˆå§‹ promise 1 ç§’å resolve <code>(*)</code>ï¼Œ</li>
<li>ç„¶å <code>.then</code> æ–¹æ³•è¢«è°ƒç”¨ <code>(**)</code>ã€‚</li>
<li>å®ƒè¿”å›çš„å€¼è¢«ä¼ å…¥ä¸‹ä¸€ä¸ª <code>.then</code> çš„å¤„ç†ç¨‹åº <code>(***)</code></li>
<li>â€¦â€¦ä¾æ­¤ç±»æ¨ã€‚</li>
</ol>
<p>éšç€ result åœ¨å¤„ç†ç¨‹åºé“¾ä¸­ä¼ é€’ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ° <code>alert</code> ä¾æ¬¡æ˜¾ç¤ºï¼š<code>1</code> â†’ <code>2</code> â†’ <code>4</code>ã€‚</p>
<figure><div class="image" style="width:141px">
      <div class="image__ratio" style="padding-top:225.531914893617%"></div>
      <img src="article/promise-chaining/promise-then-chain.png" tppabs="https://zh.javascript.info/article/promise-chaining/promise-then-chain.png" alt="" width="141" height="318" class="image__image">
      </div></figure><p>ä¹‹æ‰€ä»¥è¿™ä¹ˆè¿è¡Œï¼Œæ˜¯å› ä¸º <code>promise.then</code> è¿”å›äº†ä¸€ä¸ª promiseï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨å®ƒè°ƒç”¨ä¸‹ä¸€ä¸ª <code>.then</code>ã€‚</p>
<p>å½“æ§åˆ¶å‡½æ•°è¿”å›ä¸€ä¸ªå€¼æ—¶ï¼Œå®ƒä¼šå˜æˆå½“å‰ promise çš„ resultï¼Œæ‰€ä»¥ä¼šç”¨å®ƒè°ƒç”¨ä¸‹ä¸€ä¸ª <code>.then</code>ã€‚</p>
<p>ä¸ºäº†æŠŠè¿™äº›è¯è®²æ›´æ¸…æ¥šï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹é“¾çš„å¼€å¤´ï¼š</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">new Promise(function(resolve, reject) {

  setTimeout(() =&gt; resolve(1), 1000);

}).then(function(result) {

  alert(result);
  return result * 2; // &lt;-- (1)

}) // &lt;-- (2)
// .thenâ€¦</code></pre>
        </div>
      </div>
      
      </div><p><code>.then</code> è¿”å›çš„å€¼æ˜¯ä¸€ä¸ª promiseï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨ <code>(2)</code> å¤„æ·»åŠ å¦ä¸€ä¸ª <code>.then</code>ã€‚åœ¨ <code>(1)</code> å¤„è¿”å›å€¼æ—¶ï¼Œå½“å‰ promise å˜æˆ resolvedï¼Œç„¶åä¸‹ä¸€ä¸ªå¤„ç†ç¨‹åºä½¿ç”¨è¿™ä¸ªè¿”å›å€¼è¿è¡Œã€‚</p>
<p>ä¸é“¾å¼è°ƒç”¨ä¸åŒï¼Œç†è®ºä¸Šæˆ‘ä»¬ä¹Ÿèƒ½æ·»åŠ è®¸å¤š <code>.then</code> åˆ°ä¸€ä¸ª promise ä¸Šï¼Œå°±åƒè¿™æ ·ï¼š</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">let promise = new Promise(function(resolve, reject) {
  setTimeout(() =&gt; resolve(1), 1000);
});

promise.then(function(result) {
  alert(result); // 1
  return result * 2;
});

promise.then(function(result) {
  alert(result); // 1
  return result * 2;
});

promise.then(function(result) {
  alert(result); // 1
  return result * 2;
});</code></pre>
        </div>
      </div>
      
      </div><p>â€¦â€¦ä½†è¿™æ˜¯ä¸€ä¸ªå®Œå…¨ä¸åŒçš„ä¸œè¥¿ï¼Œçœ‹è¿™å¼ å›¾ï¼ˆå¯¹æ¯”ä¸Šé¢çš„é“¾å¼è°ƒç”¨ï¼‰ï¼š</p>
<figure><div class="image" style="width:355px">
      <div class="image__ratio" style="padding-top:41.12676056338028%"></div>
      <img src="article/promise-chaining/promise-then-many.png" tppabs="https://zh.javascript.info/article/promise-chaining/promise-then-many.png" alt="" width="355" height="146" class="image__image">
      </div></figure><p>åœ¨åŒä¸€ä¸ª promise ä¸Šçš„æ‰€æœ‰ <code>.then</code> ä¼šå¾—åˆ°ç›¸åŒçš„ç»“æœ â€”â€” è¯¥ promise çš„ resultã€‚æ‰€ä»¥ï¼Œä»¥ä¸Šä»£ç ä¸­æ‰€æœ‰ <code>alert</code> ä¼šæ˜¾ç¤ºç›¸åŒçš„å†…å®¹ï¼š<code>1</code>ã€‚å®ƒä»¬ä¹‹é—´æ²¡æœ‰ result çš„ä¼ é€’ã€‚</p>
<p>å®é™…ä¸Šæˆ‘ä»¬æå°‘é‡åˆ°ä¸€ä¸ª promise éœ€è¦å¤šå¤„ç†ç¨‹åºï¼Œè€Œæ˜¯æ›´ç»å¸¸åœ°ä½¿ç”¨é“¾å¼è°ƒç”¨ã€‚</p>
<h2><a class="main__anchor" name="fan-hui-promises" href="#fan-hui-promises">è¿”å› promises</a></h2><p>æ­£å¸¸æ¥è¯´ï¼Œ<code>.then</code> å¤„ç†ç¨‹åºè¿”å›çš„å€¼ä¼šç«‹å³ä¼ å…¥ä¸‹ä¸€ä¸ªå¤„ç†ç¨‹åºã€‚ä½†æ˜¯æœ‰ä¸€ä¸ªä¾‹å¤–ã€‚</p>
<p>å¦‚æœè¿”å›çš„å€¼æ˜¯ä¸€ä¸ª promiseï¼Œé‚£ä¹ˆç›´åˆ°å®ƒç»“æŸä¹‹å‰ï¼Œä¸‹ä¸€æ­¥æ‰§è¡Œä¼šä¸€ç›´è¢«æš‚åœã€‚åœ¨ç»“æŸä¹‹åï¼Œè¯¥ promise çš„ç»“æœä¼šä¼ é€’ç»™ä¸‹ä¸€ä¸ª <code>.then</code> å¤„ç†ç¨‹åºã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<div data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:8,&quot;end&quot;:10}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">new Promise(function(resolve, reject) {

  setTimeout(() =&gt; resolve(1), 1000);

}).then(function(result) {

  alert(result); // 1

  return new Promise((resolve, reject) =&gt; { // (*)
    setTimeout(() =&gt; resolve(result * 2), 1000);
  });

}).then(function(result) { // (**)

  alert(result); // 2

  return new Promise((resolve, reject) =&gt; {
    setTimeout(() =&gt; resolve(result * 2), 1000);
  });

}).then(function(result) {

  alert(result); // 4

});</code></pre>
        </div>
      </div>
      
      </div><p>è¿™é‡Œç¬¬ä¸€ä¸ª <code>.then</code> æ˜¾ç¤º <code>1</code> å¹¶åœ¨ <code>(*)</code> è¡Œè¿”å› <code>new Promise(â€¦)</code>ï¼Œä¸€ç§’ä¹‹åå®ƒä¼š resolve æ‰ï¼Œç„¶å resultï¼ˆ<code>resolve</code> çš„å‚æ•°ï¼Œåœ¨è¿™é‡Œå®ƒæ˜¯ <code>result*2</code>ï¼‰è¢«ä¼ é€’ç»™ä½äº <code>(**)</code> è¡Œçš„ç¬¬äºŒä¸ª <code>.then</code>ã€‚å®ƒä¼šæ˜¾ç¤º <code>2</code>ï¼Œè€Œä¸”æ‰§è¡Œç›¸åŒçš„åŠ¨ä½œã€‚</p>
<p>æ‰€ä»¥è¾“å‡ºè¿˜æ˜¯ 1 â†’ 2 â†’ 4ï¼Œä½†æ˜¯ç°åœ¨æ¯æ¬¡ <code>alert</code> è°ƒç”¨ä¹‹é—´ä¼šæœ‰ 1 ç§’é’Ÿçš„å»¶è¿Ÿã€‚</p>
<p>è¿”å› promises å…è®¸æˆ‘ä»¬å»ºç«‹å¼‚æ­¥åŠ¨ä½œé“¾ã€‚</p>
<h2><a class="main__anchor" name="shi-li-loadscript" href="#shi-li-loadscript">ç¤ºä¾‹ï¼šloadScript</a></h2><p>è®©æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½ç”¨ <code>loadScript</code> ä¾æ¬¡æŒ‰é¡ºåºåŠ è½½è„šæœ¬ï¼š</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">loadScript(&quot;/article/promise-chaining/one.js&quot;)
  .then(function(script) {
    return loadScript(&quot;/article/promise-chaining/two.js&quot;);
  })
  .then(function(script) {
    return loadScript(&quot;/article/promise-chaining/three.js&quot;);
  })
  .then(function(script) {
    // ä½¿ç”¨è„šæœ¬é‡Œå£°æ˜çš„å‡½æ•°æ¥è¡¨æ˜å®ƒä»¬çš„ç¡®è¢«åŠ è½½äº†
    one();
    two();
    three();
  });</code></pre>
        </div>
      </div>
      
      </div><p>è¿™é‡Œæ¯ä¸ª <code>loadScript</code> è°ƒç”¨è¿”å›ä¸€ä¸ª promiseï¼Œå¹¶ä¸”åœ¨å®ƒ resolve æ—¶è¿è¡Œä¸‹ä¸€ä¸ª <code>.then</code>ã€‚ ç„¶åå®ƒå¼€å§‹åŠ è½½ä¸‹ä¸€ä¸ªè„šæœ¬ã€‚æ‰€ä»¥è„šæœ¬æ˜¯ä¾æ¬¡è¢«åŠ è½½çš„ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨é“¾ä¸­æ·»åŠ æ›´å¤šçš„å¼‚æ­¥åŠ¨ä½œã€‚è¯·æ³¨æ„ä»£ç ä»ç„¶â€œæ‰å¹³â€ï¼Œå®ƒå‘ä¸‹å¢é•¿ï¼Œè€Œä¸æ˜¯å‘å³ã€‚æ²¡æœ‰â€œæ­»äº¡é‡‘å­—å¡”â€çš„è¿¹è±¡ã€‚</p>
<p>è¯·æ³¨æ„ç†è®ºä¸Šä¹Ÿå¯ä»¥åœ¨æ¯ä¸€ä¸ª promise åç›´æ¥å†™ <code>.then</code>ï¼Œè€Œä¸æ˜¯è¿”å›å®ƒä»¬ï¼Œå°±åƒè¿™æ ·ï¼š</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">loadScript(&quot;/article/promise-chaining/one.js&quot;).then(function(script1) {
  loadScript(&quot;/article/promise-chaining/two.js&quot;).then(function(script2) {
    loadScript(&quot;/article/promise-chaining/three.js&quot;).then(function(script3) {
      // è¿™ä¸ªå‡½æ•°å¯ä»¥è®¿é—® script1ã€script2 å’Œ script3 å˜é‡
      one();
      two();
      three();
    });
  });
});</code></pre>
        </div>
      </div>
      
      </div><p>è¿™æ®µä»£ç åšäº†ä¸€æ ·çš„äº‹æƒ…ï¼šé¡ºåºåŠ è½½ 3 ä¸ªè„šæœ¬ã€‚ä½†æ˜¯å®ƒâ€œå‘å³å¢é•¿â€ã€‚æ‰€ä»¥å’Œä½¿ç”¨å›è°ƒå‡½æ•°ä¸€æ ·ï¼Œæˆ‘ä»¬ä¼šç¢°åˆ°ç›¸åŒçš„é—®é¢˜ã€‚è¦ä½¿ç”¨é“¾å¼é£æ ¼ï¼ˆ<code>.then</code> ä¸­è¿”å› promiseï¼‰æ¥é¿å…è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>æœ‰æ—¶ç›´æ¥å†™ <code>.then</code> æ˜¯æ²¡é—®é¢˜çš„ï¼Œå› ä¸ºåµŒå¥—å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨ä½œç”¨åŸŸï¼ˆè¿™é‡Œå¤§å¤šæ•°åµŒå¥—å›è°ƒå‡½æ•°æœ‰æƒåˆ©è®¿é—®æ‰€æœ‰çš„å˜é‡ <code>scriptX</code>ï¼‰ï¼Œä½†è¿™æ˜¯ä¸€ä¸ªä¾‹å¤–è€Œä¸ç®—æ˜¯è§„åˆ™ã€‚</p>
<div class="important important_smart">
            <div class="important__header"><span class="important__type">Thenables</span></div>
            <div class="important__content"><p>ç¡®åˆ‡åœ°è¯´ï¼Œ<code>.then</code> å¯ä»¥è¿”å›ä»»æ„çš„ â€œthenableâ€ å¯¹è±¡ï¼Œå¹¶ä¸”ä¼šè¢«å½“åšä¸€ä¸ª promise æ¥å¯¹å¾…ã€‚</p>
<p>â€œthenableâ€ å¯¹è±¡æŒ‡æ‹¥æœ‰ <code>.then</code> æ–¹æ³•çš„ä»»æ„å¯¹è±¡ã€‚</p>
<p>ç¬¬ä¸‰æ–¹åº“èƒ½å®ç°å®ƒä»¬è‡ªå·±çš„ â€œå¯å…¼å®¹ promiseâ€ å¯¹è±¡å°±æ˜¯è¿™ç§ç†å¿µã€‚ä»–ä»¬å¯ä»¥æ‰©å±•æ–¹æ³•é›†ï¼Œä¸è¿‡ä¼šä¿è¯ä¸åŸç”Ÿ promise å…¼å®¹ï¼Œå› ä¸ºä»–ä»¬å®ç°äº† <code>.then</code> æ–¹æ³•ã€‚</p>
<p>è¿™é‡Œæ˜¯ä¸€ä¸ª thenable å¯¹è±¡çš„ç¤ºä¾‹ï¼š</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">class Thenable {
  constructor(num) {
    this.num = num;
  }
  then(resolve, reject) {
    alert(resolve); // function() { native code }
    // 1 ç§’åç”¨ this.num*2 æ¥ resolve
    setTimeout(() =&gt; resolve(this.num * 2), 1000); // (**)
  }
}

new Promise(resolve =&gt; resolve(1))
  .then(result =&gt; {
    return new Thenable(result); // (*)
  })
  .then(alert); // 1000 ms åæ˜¾ç¤º 2</code></pre>
        </div>
      </div>
      
      </div><p>JavaScript åœ¨ <code>(*)</code> è¡Œæ£€æŸ¥ <code>.then</code> å¤„ç†ç¨‹åºè¿”å›çš„å¯¹è±¡ï¼šå¦‚æœå®ƒæœ‰ä¸€ä¸ªåä¸º <code>then</code> çš„å¯è°ƒç”¨æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒä¼šè°ƒç”¨è¯¥æ–¹æ³•å¹¶æä¾›åŸç”Ÿå‡½æ•° <code>resolve</code>ï¼Œ<code>reject ä½œä¸ºå‚æ•°ï¼ˆç±»ä¼¼äº executorï¼‰å¹¶åœ¨å®ƒè¢«è°ƒç”¨å‰ä¸€ç›´ç­‰å¾…ã€‚ä¸Šé¢çš„ä¾‹å­ä¸­</code>resolve(2)<code>1 ç§’åè¢«è°ƒç”¨</code>(**)`ã€‚ç„¶å result ä¼šå»¶é“¾å‘ä¸‹ä¼ é€’ã€‚</p>
<p>è¿™ä¸ªåŠŸèƒ½å…è®¸æ•´åˆå®šåˆ¶å¯¹è±¡å’Œ promise é“¾ï¼Œä¸ç”¨ä» <code>Promise</code> ç»§æ‰¿ã€‚</p>
</div></div>
<h2><a class="main__anchor" name="geng-fu-za-de-shi-li-fetch" href="#geng-fu-za-de-shi-li-fetch">æ›´å¤æ‚çš„ç¤ºä¾‹ï¼šfetch</a></h2><p>åœ¨å‰ç«¯ç¼–ç¨‹ä¸­ï¼Œpromise ç»å¸¸è¢«ç”¨æ¥ç½‘ç»œè¯·æ±‚ï¼Œå°±è®©æˆ‘ä»¬å†çœ‹ä¸€ä¸ªå…³äºè¿™ç‚¹å±•å¼€çš„ç¤ºä¾‹ã€‚</p>
<p>æˆ‘ä»¬å°†ä½¿ç”¨ <a href="javascript:if(confirm('https://developer.mozilla.org/zh/docs/Web/API/WindowOrWorkerGlobalScope/fetch  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://developer.mozilla.org/zh/docs/Web/API/WindowOrWorkerGlobalScope/fetch'" tppabs="https://developer.mozilla.org/zh/docs/Web/API/WindowOrWorkerGlobalScope/fetch">fetch</a> æ–¹æ³•ä»è¿œç¨‹æœåŠ¡å™¨åŠ è½½ç”¨æˆ·ä¿¡æ¯ã€‚è¯¥æ–¹æ³•ååˆ†å¤æ‚ï¼Œå®ƒæœ‰å¾ˆå¤šå¯é€‰å‚æ•°ï¼Œä½†æ˜¯åŸºæœ¬ç”¨æ³•ååˆ†ç®€å•ï¼š</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">let promise = fetch(url);</code></pre>
        </div>
      </div>
      
      </div><p>å®ƒå‘é€ç½‘ç»œè¯·æ±‚åˆ° <code>url</code> å¹¶è¿”å›ä¸€ä¸ª promiseã€‚å½“è¿œç¨‹æœåŠ¡å™¨è¿”å›å“åº”å¤´ï¼ˆæ³¨æ„ä¸æ˜¯<strong>å…¨éƒ¨å“åº”åŠ è½½å®Œæˆ</strong>ï¼‰æ—¶ï¼Œè¯¥ promise ç”¨ä¸€ä¸ª <code>response</code> æ¥ resolve æ‰ã€‚</p>
<p>ä¸ºäº†è¯»å–å…¨éƒ¨çš„å“åº”ï¼Œæˆ‘ä»¬åº”è¯¥è°ƒç”¨æ–¹æ³• <code>response.text()</code>ï¼šå½“å…¨éƒ¨æ–‡å­—å†…å®¹ä»è¿œç¨‹æœåŠ¡å™¨ä¸Šä¸‹è½½åï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ª resolved çŠ¶æ€çš„ promiseï¼ŒåŒæ—¶è¯¥æ–‡å­—ä¼šä½œä¸º resultã€‚</p>
<p>ä¸‹é¢ä»£ç å‘ <code>user.json</code> å‘é€è¯·æ±‚å¹¶ä»æœåŠ¡å™¨åŠ è½½æ–‡å­—ã€‚</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">fetch('/article/promise-chaining/user.json')
  // å½“è¿œç¨‹æœåŠ¡å™¨å¼€å§‹å“åº”æ—¶ï¼Œä¸‹é¢çš„ .then æ‰§è¡Œ
  .then(function(response) {
    // å½“ç»“æŸä¸‹è½½æ—¶ï¼Œresponse.text() ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ resolved promiseï¼Œè¯¥ promise æ‹¥æœ‰å…¨éƒ¨å“åº”æ–‡å­—
    return response.text();
  })
  .then(function(text) {
    // ...è¿™æ˜¯è¿œç¨‹æ–‡ä»¶å†…å®¹
    alert(text); // {&quot;name&quot;: &quot;iliakan&quot;, isAdmin: true}
  });</code></pre>
        </div>
      </div>
      
      </div><p>å…¶å®è¿˜æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œ<code>response.json()</code> ä¼šè¯»å–è¿œç¨‹æ•°æ®å¹¶æŠŠå®ƒè§£ææˆ JSONã€‚æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ç”¨è¿™ä¸ªæ–¹æ³•è¦æ›´æ–¹ä¾¿ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬æ›¿æ¢æˆæ­¤æ–¹æ³•ã€‚</p>
<p>ä¸ºäº†ç®€æ´ï¼Œæˆ‘ä»¬ä¹Ÿä½¿ç”¨ç®­å¤´å‡½æ•°ï¼š</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">// åŒä¸Šï¼Œä½†æ˜¯ä½¿ç”¨ response.json() æŠŠè¿œç¨‹å†…å®¹è§£æä¸º JSON
fetch('/article/promise-chaining/user.json')
  .then(response =&gt; response.json())
  .then(user =&gt; alert(user.name)); // iliakan</code></pre>
        </div>
      </div>
      
      </div><p>ç°åœ¨æˆ‘ä»¬ç”¨åŠ è½½å¥½çš„ç”¨æˆ·ä¿¡æ¯æç‚¹äº‹æƒ…ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å¤šå‘ä¸€ä¸ªè¯·æ±‚åˆ° githubï¼ŒåŠ è½½ç”¨æˆ·ä¿¡æ¯å¹¶æ˜¾ç¤ºå¤´åƒï¼š</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">// å‘ä¸€ä¸ª user.json è¯·æ±‚
fetch('/article/promise-chaining/user.json')
  // ä½œä¸º json åŠ è½½
  .then(response =&gt; response.json())
  // å‘ä¸€ä¸ªè¯·æ±‚åˆ° github
  .then(user =&gt; fetch(`https://api.github.com/users/${user.name}`))
  // å“åº”ä½œä¸º json åŠ è½½
  .then(response =&gt; response.json())
  // æ˜¾ç¤ºå¤´åƒå›¾ç‰‡ï¼ˆgithubUser.avatar_urlï¼‰3 ç§’ï¼ˆä¹Ÿå¯ä»¥åŠ ä¸ŠåŠ¨ç”»æ•ˆæœï¼‰
  .then(githubUser =&gt; {
    let img = document.createElement('img');
    img.src = githubUser.avatar_url;
    img.className = &quot;promise-avatar-example&quot;;
    document.body.append(img);

    setTimeout(() =&gt; img.remove(), 3000); // (*)
  });</code></pre>
        </div>
      </div>
      
      </div><p>è¿™æ®µä»£ç å¯ä»¥å·¥ä½œï¼Œå…·ä½“ç»†èŠ‚è¯·çœ‹æ³¨é‡Šï¼Œå®ƒæœ‰è‰¯å¥½çš„è‡ªæˆ‘æè¿°ã€‚ä½†æ˜¯ï¼Œæœ‰ä¸€ä¸ªæ½œåœ¨çš„é—®é¢˜ï¼Œä¸€ä¸ªæ–°æ‰‹ä½¿ç”¨ promise çš„å…¸å‹é—®é¢˜ã€‚</p>
<p>è¯·çœ‹ <code>(*)</code> è¡Œï¼šæˆ‘ä»¬å¦‚ä½•èƒ½åœ¨å¤´åƒç»“æŸæ˜¾ç¤ºå¹¶åœ¨ç§»é™¤<strong>ä¹‹å</strong>åšç‚¹ä»€ä¹ˆï¼Ÿä¾‹å¦‚ï¼Œæˆ‘ä»¬æƒ³æ˜¾ç¤ºä¸€ä¸ªå¯ä»¥ç¼–è¾‘ç”¨æˆ·ï¼Œæˆ–è€…åˆ«çš„è¡¨å•ã€‚å°±ç›®å‰è€Œè¨€æ˜¯åšä¸åˆ°çš„ã€‚</p>
<p>ä¸ºäº†ä½¿é“¾å¯æ‰©å±•ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å¤´åƒç»“æŸæ˜¾ç¤ºæ—¶è¿”å›ä¸€ä¸ª resolved çŠ¶æ€çš„ promiseã€‚</p>
<p>å°±åƒè¿™æ ·ï¼š</p>
<div data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:12,&quot;end&quot;:12},{&quot;start&quot;:4,&quot;end&quot;:4}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">fetch('/article/promise-chaining/user.json')
  .then(response =&gt; response.json())
  .then(user =&gt; fetch(`https://api.github.com/users/${user.name}`))
  .then(response =&gt; response.json())
  .then(githubUser =&gt; new Promise(function(resolve, reject) {
    let img = document.createElement('img');
    img.src = githubUser.avatar_url;
    img.className = &quot;promise-avatar-example&quot;;
    document.body.append(img);

    setTimeout(() =&gt; {
      img.remove();
      resolve(githubUser);
    }, 3000);
  }))
  // triggers after 3 seconds
  .then(githubUser =&gt; alert(`Finished showing ${githubUser.name}`));</code></pre>
        </div>
      </div>
      
      </div><p>ç°åœ¨ï¼Œåœ¨ <code>setTimeout</code> åè¿è¡Œ <code>img.remove()</code>ï¼Œç„¶åè°ƒç”¨ <code>resolve(githubUser)</code>ï¼Œè¿™æ ·é“¾ä¸­çš„æ§åˆ¶æµç¨‹èµ°åˆ°ä¸‹ä¸€ä¸ª <code>.then</code> å¹¶ä¼ å…¥ç”¨æˆ·æ•°æ®ã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªè§„å¾‹ï¼Œä¸€ä¸ªå¼‚æ­¥åŠ¨ä½œåº”è¯¥æ°¸è¿œè¿”å›ä¸€ä¸ª promiseã€‚</p>
<p>è¿™è®©è§„åˆ’ä¸‹ä¸€æ­¥åŠ¨ä½œæˆä¸ºå¯èƒ½ã€‚è™½ç„¶ç°åœ¨æˆ‘ä»¬æ²¡æ‰“ç®—æ‰©å±•é“¾ï¼Œæˆ‘ä»¬å¯èƒ½åœ¨æ—¥åéœ€è¦å®ƒã€‚</p>
<p>æœ€ç»ˆï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä»£ç åˆ†å‰²æˆå‡ ä¸ªå¯å¤ç”¨çš„å‡½æ•°ï¼š</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">function loadJson(url) {
  return fetch(url)
    .then(response =&gt; response.json());
}

function loadGithubUser(name) {
  return fetch(`https://api.github.com/users/${name}`)
    .then(response =&gt; response.json());
}

function showAvatar(githubUser) {
  return new Promise(function(resolve, reject) {
    let img = document.createElement('img');
    img.src = githubUser.avatar_url;
    img.className = &quot;promise-avatar-example&quot;;
    document.body.append(img);

    setTimeout(() =&gt; {
      img.remove();
      resolve(githubUser);
    }, 3000);
  });
}

// ä½¿ç”¨å®ƒä»¬
loadJson('/article/promise-chaining/user.json')
  .then(user =&gt; loadGithubUser(user.name))
  .then(showAvatar)
  .then(githubUser =&gt; alert(`Finished showing ${githubUser.name}`));
  // ...</code></pre>
        </div>
      </div>
      
      </div><h2><a class="main__anchor" name="cuo-wu-chu-li" href="#cuo-wu-chu-li">é”™è¯¯å¤„ç†</a></h2><p>å¼‚æ­¥åŠ¨ä½œå¯èƒ½ä¼šå¤±è´¥ï¼šå¦‚æœå‡ºç°é”™è¯¯ï¼Œç›¸åº”çš„ promise ä¼šå˜æˆ rejectedã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¿œç¨‹æœåŠ¡å™¨ä¸å¯ç”¨ <code>fetch</code> ä¼šå¤±è´¥ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>.catch</code> æ¥å¤„ç†é”™è¯¯ï¼ˆrejectionsï¼‰ã€‚</p>
<p>promise é“¾åœ¨è¿™æ–¹é¢åšçš„å¾ˆæ£’ã€‚å½“ä¸€ä¸ª promise reject æ—¶ï¼Œä»£ç æ§åˆ¶æµç¨‹è·³åˆ°é“¾ä¸­æœ€è¿‘çš„ rejection å¤„ç†ç¨‹åºã€‚è¿™åœ¨å®è·µä¸­éå¸¸æ–¹ä¾¿ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸‹é¢ä»£ç ä¸­çš„ URL æ˜¯é”™çš„ï¼ˆæ²¡æœ‰è¿™ä¸ªæœåŠ¡å™¨ï¼‰å¹¶ä¸”ä½¿ç”¨ <code>.catch</code> å¤„ç†é”™è¯¯ï¼š</p>
<div data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:0,&quot;end&quot;:0}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">fetch('https://no-such-server.blabla') // rejects
  .then(response =&gt; response.json())
  .catch(err =&gt; alert(err)) // TypeError: failed to fetch (the text may vary)</code></pre>
        </div>
      </div>
      
      </div><p>æˆ–è€…ï¼ŒæœåŠ¡å™¨çš„ä¸€åˆ‡éƒ½å¾ˆå¥½ï¼Œä½†å“åº”ä¸æ˜¯æœ‰æ•ˆçš„ JSONï¼š</p>
<div data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:1,&quot;end&quot;:1}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">fetch('/') // fetch ç°åœ¨è¿è¡Œè‰¯å¥½ï¼ŒæœåŠ¡å™¨æˆåŠŸå“åº”
  .then(response =&gt; response.json()) // rejectsï¼šé¡µé¢æ˜¯ HTMLï¼Œè€Œä¸æ˜¯æœ‰æ•ˆçš„ json
  .catch(err =&gt; alert(err)) // SyntaxError: Unexpected token &lt; in JSON at position 0</code></pre>
        </div>
      </div>
      
      </div><p>åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†é™„åŠ  <code>.catch</code> æ¥å¤„ç†åœ¨å¤´åƒ â€”â€” åŠ è½½ â€”â€” æ˜¾ç¤ºé“¾ä¸­æ‰€æœ‰çš„é”™è¯¯ï¼š</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">fetch('/article/promise-chaining/user.json')
  .then(response =&gt; response.json())
  .then(user =&gt; fetch(`https://api.github.com/users/${user.name}`))
  .then(response =&gt; response.json())
  .then(githubUser =&gt; new Promise(function(resolve, reject) {
    let img = document.createElement('img');
    img.src = githubUser.avatar_url;
    img.className = &quot;promise-avatar-example&quot;;
    document.body.append(img);

    setTimeout(() =&gt; {
      img.remove();
      resolve(githubUser);
    }, 3000);
  }))
  .catch(error =&gt; alert(error.message));</code></pre>
        </div>
      </div>
      
      </div><p>è¿™é‡Œ <code>.catch</code> æ ¹æœ¬æ²¡æœ‰è§¦å‘ï¼Œå› ä¸ºæ²¡æœ‰é”™è¯¯ã€‚ä½†å¦‚æœä¸Šé¢çš„ä»»ä½• promise rejectï¼Œé‚£ä¹ˆå®ƒå°±ä¼šæ‰§è¡Œã€‚</p>
<h2><a class="main__anchor" name="yin-shi-trycatch" href="#yin-shi-trycatch">éšå¼ tryâ€¦catch</a></h2><p>executor å’Œ promise å¤„ç†ç¨‹åºä»£ç å‘¨å›´æœ‰ä¸€ä¸ª â€œéšè—çš„ <code>try..catch</code>â€ã€‚å¦‚æœé”™è¯¯å‘ç”Ÿï¼Œå®ƒä¼šæ•æ‰å¼‚å¸¸å¹¶å½“åšä¸€ä¸ª rejection æ¥å¯¹å¾…ã€‚</p>
<p>ä¾‹å¦‚è¿™æ®µä»£ç ï¼š</p>
<div data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:1,&quot;end&quot;:1}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">new Promise(function(resolve, reject) {
  throw new Error(&quot;Whoops!&quot;);
}).catch(alert); // Error: Whoops!</code></pre>
        </div>
      </div>
      
      </div><p>â€¦å’Œè¿™é‡Œå·¥ä½œæ–¹å¼ç›¸åŒï¼š</p>
<div data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:1,&quot;end&quot;:1}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">new Promise(function(resolve, reject) {
  reject(new Error(&quot;Whoops!&quot;));
}).catch(alert); // Error: Whoops!</code></pre>
        </div>
      </div>
      
      </div><p>æ‰§è¡Œä»£ç å‘¨å›´â€œéšè—çš„ <code>try..catch</code>â€è‡ªåŠ¨æ•è·é”™è¯¯å¹¶æŠŠå®ƒä½œä¸ºä¸€ä¸ª rejection å¯¹å¾…ã€‚</p>
<p>è¿™ä¸æ­¢æ˜¯åœ¨ executor ä¸­ï¼Œå¤„ç†ç¨‹åºä¹Ÿæœ‰ã€‚å¦‚æœæˆ‘ä»¬åœ¨ <code>.then</code> å¤„ç†ç¨‹åºä¸­ <code>throw</code>ï¼Œå°±æ„å‘³ç€è¿”å›äº†ä¸€ä¸ª rejected promiseï¼Œæ‰€ä»¥ä»£ç æ§åˆ¶æµç¨‹ä¼šè·³åˆ°æœ€è¿‘çš„é”™è¯¯å¤„ç†ç¨‹åºã€‚</p>
<p>è¿™æœ‰ä¸€ä¸ªä¾‹å­ï¼š</p>
<div data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:3,&quot;end&quot;:3}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">new Promise(function(resolve, reject) {
  resolve(&quot;ok&quot;);
}).then(function(result) {
  throw new Error(&quot;Whoops!&quot;); // rejects the promise
}).catch(alert); // Error: Whoops!</code></pre>
        </div>
      </div>
      
      </div><p>è¿™ä¸ä»…é€‚ç”¨äº <code>throw</code>ï¼Œè€Œä¸”é€‚ç”¨äºä»»ä½•é”™è¯¯ï¼ŒåŒ…æ‹¬ç¼–ç¨‹é”™è¯¯ï¼š</p>
<div data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:3,&quot;end&quot;:3}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">new Promise(function(resolve, reject) {
  resolve(&quot;ok&quot;);
}).then(function(result) {
  blabla(); // æ²¡æœ‰æ­¤æ–¹æ³•
}).catch(alert); // ReferenceError: blabla is not defined</code></pre>
        </div>
      </div>
      
      </div><p>ä½œä¸ºä¸€ä¸ªå‰¯ä½œç”¨ï¼Œæœ€ç»ˆ <code>.catch</code> ä¸ä»…ä¼šæ•è·æ˜ç¡®çš„ rejectionsï¼Œä¹Ÿä¼šæ•è·åœ¨ä¸Šé¢çš„å¤„ç†ç¨‹åºä¸­å¶å°”å‡ºç°çš„é”™è¯¯ã€‚</p>
<h2><a class="main__anchor" name="zhong-xin-pao-chu" href="#zhong-xin-pao-chu">é‡æ–°æŠ›å‡º</a></h2><p>æ­£å¦‚æˆ‘ä»¬å·²ç»æ³¨æ„åˆ°çš„é‚£æ ·ï¼Œ<code>.catch</code> è¡¨ç°å¾—åƒ <code>try..catch</code>ã€‚æˆ‘ä»¬å¯ä»¥éšå¿ƒæ‰€æ¬²æ‹¥æœ‰ä»»æ„å¤šä¸ª <code>.then</code>ï¼Œç„¶åä½¿ç”¨ä¸€ä¸ª <code>.catch</code> åœ¨æœ€åæ¥å¤„ç†å®ƒä»¬ä¸­çš„æ‰€æœ‰é”™è¯¯ã€‚</p>
<p>åœ¨å¸¸è§„ <code>try..catch</code> ä¸­æˆ‘ä»¬å¯ä»¥åˆ†æé”™è¯¯ï¼Œå¦‚æœæ— æ³•å¤„ç†ï¼Œå¯èƒ½ä¼šé‡æ–°æŠ›å‡ºé”™è¯¯ã€‚promise ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚å¦‚æœæˆ‘ä»¬åœ¨ <code>.catch</code> é‡Œé¢ <code>throw</code>ï¼Œé‚£ä¹ˆæ§åˆ¶æµç¨‹å°†è½¬åˆ°ä¸‹ä¸€ä¸ªæœ€æ¥è¿‘çš„é”™è¯¯å¤„ç†ç¨‹åºã€‚å¦‚æœæˆ‘ä»¬å¤„ç†é”™è¯¯å¹¶æ­£å¸¸ç»“æŸï¼Œé‚£ä¹ˆå®ƒå°†ç»§ç»­æ‰§è¡Œæœ€æ¥è¿‘çš„ <code>.then</code> æˆåŠŸå¤„ç†ç¨‹åºã€‚</p>
<p>åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œ<code>.catch</code> æˆåŠŸå¤„ç†äº†é”™è¯¯ï¼š</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">// æ‰§è¡Œæµç¨‹ï¼šcatch -&gt; then
new Promise(function(resolve, reject) {

  throw new Error(&quot;Whoops!&quot;);

}).catch(function(error) {

  alert(&quot;The error is handled, continue normally&quot;);

}).then(() =&gt; alert(&quot;Next successful handler runs&quot;));</code></pre>
        </div>
      </div>
      
      </div><p>åœ¨è¿™é‡Œï¼Œ<code>.catch</code> å—æ­£å¸¸ç»“æŸã€‚ç„¶åè°ƒç”¨ä¸‹ä¸€ä¸ªæˆåŠŸå¤„ç†ç¨‹åºã€‚æˆ–è€…å®ƒå¯ä»¥è¿”å›ä¸€äº›ä¸œè¥¿ï¼Œè¿™å’Œä¹‹å‰çš„æµç¨‹ç›¸åŒã€‚</p>
<p>â€¦â€¦åœ¨è¿™é‡Œï¼Œ<code>.catch</code> å—åˆ†æé”™è¯¯å¹¶å†æ¬¡æŠ›å‡ºï¼š</p>
<div data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:12,&quot;end&quot;:12}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">// æ‰§è¡Œé¡ºåºï¼šcatch -&gt; catch -&gt; then
new Promise(function(resolve, reject) {

  throw new Error(&quot;Whoops!&quot;);

}).catch(function(error) { // (*)

  if (error instanceof URIError) {
    // å¤„ç†å®ƒ
  } else {
    alert(&quot;Can't handle such error&quot;);

    throw error; // æŠ›å‡ºè¿™ä¸ªæˆ–åˆ«çš„é”™è¯¯ï¼Œä»£ç è·³è½¬åˆ°ä¸‹ä¸€ä¸ª catch
  }

}).then(function() {
  /* è¿™é‡Œæ°¸è¿œä¸ä¼šæ‰§è¡Œ */
}).catch(error =&gt; { // (**)

  alert(`The unknown error has occurred: ${error}`);
  // ä»€ä¹ˆéƒ½ä¸è¿”å› =&gt; æ‰§è¡Œæ­£å¸¸æµç¨‹

});</code></pre>
        </div>
      </div>
      
      </div><p>å¤„ç†ç¨‹åº <code>(*)</code> æ•è·é”™è¯¯ä½†æ— æ³•å¤„ç†å®ƒï¼Œå› ä¸ºå®ƒä¸æ˜¯ <code>URIError</code>ï¼Œå› æ­¤å®ƒä¼šå†æ¬¡æŠ›å‡ºé”™è¯¯ã€‚ç„¶åæ‰§è¡Œæµç¨‹è·³è½¬åˆ°åé¢é“¾ä¸­ <code>(**)</code> å¤„çš„ä¸‹ä¸€ä¸ª <code>.catch</code> ã€‚</p>
<p>åœ¨ä¸‹é¢çš„éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°ä¸€ä¸ªé‡æ–°æŠ›å‡ºçš„å®é™…ä¾‹å­ã€‚</p>
<h2><a class="main__anchor" name="fetch-cuo-wu-chu-li-shi-li" href="#fetch-cuo-wu-chu-li-shi-li">Fetch é”™è¯¯å¤„ç†ç¤ºä¾‹</a></h2><p>è®©æˆ‘ä»¬æ”¹è¿›ç”¨æˆ·åŠ è½½ç¤ºä¾‹çš„é”™è¯¯å¤„ç†ã€‚</p>
<p>åœ¨ <a href="javascript:if(confirm('https://developer.mozilla.org/zh/docs/Web/API/WindowOrWorkerGlobalScope/fetch  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://developer.mozilla.org/zh/docs/Web/API/WindowOrWorkerGlobalScope/fetch'" tppabs="https://developer.mozilla.org/zh/docs/Web/API/WindowOrWorkerGlobalScope/fetch">fetch</a> ä¸å¯èƒ½å‘å‡ºè¯·æ±‚æ—¶ä¼šè¿”å› rejected çŠ¶æ€çš„ promiseã€‚ä¾‹å¦‚ï¼Œè¿œç¨‹æœåŠ¡å™¨ä¸å¯ç”¨æˆ–è€… URL æ ¼å¼ä¸å¯¹ã€‚ä½†æ˜¯å¦‚æœè¿œç¨‹æœåŠ¡å™¨å“åº” 404 é”™è¯¯æˆ– 500 é”™è¯¯ï¼Œé‚£ä¹ˆå®ƒä¼šè¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„å“åº”ã€‚</p>
<p>å¦‚æœæœåŠ¡å™¨åœ¨ <code>(*)</code> è¡Œè¿”å›å¸¦æœ‰é”™è¯¯ 500 çš„é JSON é¡µé¢æ€ä¹ˆåŠï¼Ÿå¦‚æœæ²¡æœ‰è¿™æ ·çš„ç”¨æˆ·å¹¶ä¸”åœ¨ <code>(**)</code>è¡Œ github è¿”å›é”™è¯¯ 404 çš„é¡µé¢æ€ä¹ˆåŠï¼Ÿ</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">fetch('no-such-user.json') // (*)
  .then(response =&gt; response.json())
  .then(user =&gt; fetch(`https://api.github.com/users/${user.name}`)) // (**)
  .then(response =&gt; response.json())
  .catch(alert); // SyntaxError: Unexpected token &lt; in JSON at position 0
  // ...</code></pre>
        </div>
      </div>
      
      </div><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä»£ç è¯•å›¾åŠ è½½å“åº”ä¸º jsonï¼Œæ— è®ºå¦‚ä½•éƒ½ä¼šå› è¯­æ³•é”™è¯¯è€Œç»ˆæ­¢ã€‚æ‚¨å¯ä»¥é€šè¿‡è¿è¡Œä¸Šé¢çš„ç¤ºä¾‹æ¥çœ‹ï¼Œè¿™æ˜¯å› ä¸ºè¯¥æ–‡ä»¶ <code>no-such-user.json</code> å¹¶ä¸å­˜åœ¨ã€‚</p>
<p>è¿™æ ·å¹¶ä¸å¥½ï¼Œå› ä¸ºé”™è¯¯åªæ˜¯è¯´å‡ºç°åœ¨é“¾ä¸Šï¼Œæ²¡æœ‰ç»†èŠ‚ï¼šå¤±è´¥çš„åŸå› å’Œä½ç½®ã€‚</p>
<p>æ‰€ä»¥è®©æˆ‘ä»¬å†æ·»åŠ ä¸€æ­¥ï¼šæˆ‘ä»¬åº”è¯¥æ£€æŸ¥ <code>response.status</code> å…·æœ‰ HTTP çŠ¶æ€çš„å±æ€§ï¼Œå¦‚æœå®ƒä¸æ˜¯ 200ï¼Œåˆ™æŠ›å‡ºé”™è¯¯ã€‚</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">class HttpError extends Error { // (1)
  constructor(response) {
    super(`${response.status} for ${response.url}`);
    this.name = 'HttpError';
    this.response = response;
  }
}

function loadJson(url) { // (2)
  return fetch(url)
    .then(response =&gt; {
      if (response.status == 200) {
        return response.json();
      } else {
        throw new HttpError(response);
      }
    })
}

loadJson('no-such-user.json') // (3)
  .catch(alert); // HttpError: 404 for .../no-such-user.json</code></pre>
        </div>
      </div>
      
      </div><ol>
<li>æˆ‘ä»¬ä¸º HTTP é”™è¯¯åˆ›å»ºäº†ä¸€ä¸ªè‡ªå®šä¹‰ç±»ï¼Œä»¥å°†å®ƒä»¬ä¸å…¶ä»–ç±»å‹çš„é”™è¯¯åŒºåˆ†å¼€æ¥ã€‚æ­¤å¤–ï¼Œè¿™ä¸ªæ–°ç±»æœ‰ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå®ƒæ¥å—è¯¥ <code>response</code> å¯¹è±¡å¹¶å°†å…¶ä¿å­˜åœ¨é”™è¯¯å¯¹è±¡ä¸­ã€‚å› æ­¤é”™è¯¯å¤„ç†ä»£ç å°†èƒ½å¤Ÿè®¿é—®å®ƒã€‚</li>
<li>ç„¶åæˆ‘ä»¬æŠŠè¯·æ±‚å’Œé”™è¯¯å¤„ç†ä»£ç æ”¾åˆ°ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼š fetch <code>url</code>ï¼Œ<strong>å¹¶ä¸”</strong>æŠŠä»»ä½•é 200 çŠ¶æ€çš„å“åº”å½“æˆä¸€ç§é”™è¯¯ã€‚è¿™å¾ˆæ–¹ä¾¿ï¼Œå› ä¸ºæˆ‘ä»¬ç»å¸¸éœ€è¦è¿™æ ·çš„é€»è¾‘ã€‚</li>
<li>ç°åœ¨ <code>alert</code> ä¼šæ˜¾ç¤ºæ£’çš„æ¶ˆæ¯ã€‚</li>
</ol>
<p>æ‹¥æœ‰æˆ‘ä»¬è‡ªå·±çš„é”™è¯¯ç±»çš„å¥½å¤„æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨é”™è¯¯å¤„ç†ä»£ç ä¸­è½»æ¾æ£€æŸ¥å®ƒã€‚</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å‘å‡ºè¯·æ±‚ï¼Œç„¶åå¦‚æœæˆ‘ä»¬å¾—åˆ° 404 â€”â€” è¦æ±‚ç”¨æˆ·ä¿®æ”¹ä¿¡æ¯ã€‚</p>
<p>ä¸‹é¢çš„ä»£ç ä» github åŠ è½½å…·æœ‰ç»™å®šåç§°çš„ç”¨æˆ·ã€‚å¦‚æœæ²¡æœ‰è¿™æ ·çš„ç”¨æˆ·ï¼Œé‚£ä¹ˆå®ƒä¼šè¦æ±‚æ­£ç¡®çš„åå­—ï¼š</p>
<div data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:9,&quot;end&quot;:9}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">function demoGithubUser() {
  let name = prompt(&quot;Enter a name?&quot;, &quot;iliakan&quot;);

  return loadJson(`https://api.github.com/users/${name}`)
    .then(user =&gt; {
      alert(`Full name: ${user.name}.`); // (1)
      return user;
    })
    .catch(err =&gt; {
      if (err instanceof HttpError &amp;&amp; err.response.status == 404) { // (2)
        alert(&quot;No such user, please reenter.&quot;);
        return demoGithubUser();
      } else {
        throw err;
      }
    });
}

demoGithubUser();</code></pre>
        </div>
      </div>
      
      </div><p>è¿™é‡Œï¼š</p>
<ol>
<li>å¦‚æœ <code>loadJson</code> è¿”å›ä¸€ä¸ªæœ‰æ•ˆçš„ç”¨æˆ·å¯¹è±¡ï¼Œåˆ™åœ¨ <code>(1)</code> è¡Œæ˜¾ç¤ºåå­—ï¼Œå¹¶è¿”å›ç”¨æˆ·ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥å‘é“¾ä¸­æ·»åŠ æ›´å¤šä¸ç”¨æˆ·ç›¸å…³çš„æ“ä½œã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ <code>.catch</code> ä¸‹é¢çš„ä»£ç ä¼šè¢«å¿½ç•¥ï¼Œä¸€åˆ‡éƒ½éå¸¸ç®€å•å’Œç¾å¥½ã€‚</li>
<li>å¦åˆ™ï¼Œå¦‚æœå‡ºç°é”™è¯¯ï¼Œæˆ‘ä»¬ä¼šåœ¨ <code>(2)</code> è¡Œä¸­è¿›è¡Œæ£€æŸ¥ã€‚åªæœ‰å½“å®ƒç¡®å®æ˜¯ HTTP é”™è¯¯ï¼Œå¹¶ä¸”çŠ¶æ€ä¸º 404ï¼ˆNot foundï¼‰æ—¶ï¼Œæˆ‘ä»¬æ‰ä¼šè¦æ±‚ç”¨æˆ·é‡æ–°è¾“å…¥ã€‚å¯¹äºå…¶ä»–é”™è¯¯ â€”â€” æˆ‘ä»¬ä¸çŸ¥é“å¦‚ä½•å¤„ç†ï¼Œæ‰€ä»¥æˆ‘ä»¬åªæ˜¯é‡æ–°æŠ›å‡ºå®ƒä»¬ã€‚</li>
</ol>
<h2><a class="main__anchor" name="wei-chu-li-de-rejections" href="#wei-chu-li-de-rejections">æœªå¤„ç†çš„ rejections</a></h2><p>ä¸å¤„ç†é”™è¯¯ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿä¾‹å¦‚ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­é‡æ–°æŠ›å‡ºä¹‹åã€‚æˆ–è€…ï¼Œå¦‚æœæˆ‘ä»¬å¿˜è®°å°†é”™è¯¯å¤„ç†ç¨‹åºé™„åŠ åˆ°é“¾çš„æœ«å°¾ï¼Œå°±åƒè¿™é‡Œï¼š</p>
<div data-trusted="0" class="code-example" data-refresh="1">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">new Promise(function() {
  noSuchFunction(); // Error å‡ºç° (æ²¡æœ‰æ­¤æ–¹æ³•)
}); // æ²¡æœ‰åŠ  .catch</code></pre>
        </div>
      </div>
      
      </div><p>Or here:</p>
<div data-trusted="0" class="code-example" data-refresh="1">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">// ä¸€ä¸ªæ²¡æœ‰ .catch çš„ promise é“¾
new Promise(function() {
  throw new Error(&quot;Whoops!&quot;);
}).then(function() {
  // ...something...
}).then(function() {
  // ...something else...
}).then(function() {
  // ...åé¢æ²¡æœ‰ catchï¼
});</code></pre>
        </div>
      </div>
      
      </div><p>å¦‚æœå‡ºç°é”™è¯¯ï¼Œåˆ™ promise çŠ¶æ€å˜ä¸º â€œrejectedâ€ï¼Œæ‰§è¡Œåº”è·³è½¬åˆ°æœ€è¿‘çš„ rejection å¤„ç†ç¨‹åºã€‚ä½†æ˜¯ä¸Šé¢çš„ä¾‹å­ä¸­æ²¡æœ‰è¿™æ ·çš„å¤„ç†ç¨‹åºã€‚æ‰€ä»¥é”™è¯¯ä¼šâ€œå¡ä½â€ã€‚</p>
<p>å®é™…ä¸Šï¼Œè¿™é€šå¸¸æ˜¯å› ä¸ºä¸å¥½çš„ä»£ç å¯¼è‡´çš„ã€‚ç¡®å®ï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰é”™è¯¯å¤„ç†å‘¢ï¼Ÿ</p>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¤§å¤šæ•° JavaScript å¼•æ“ä¼šè·Ÿè¸ªæ­¤ç±»æƒ…å†µå¹¶ç”Ÿæˆå…¨å±€é”™è¯¯ã€‚æˆ‘ä»¬å¯ä»¥åœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°å®ƒã€‚</p>
<p>åœ¨æµè§ˆå™¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>unhandledrejection</code> äº‹ä»¶æ•è·å®ƒï¼š</p>
<div data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:0,&quot;end&quot;:4}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">window.addEventListener('unhandledrejection', function(event) {
  // the event object has two special properties:
  alert(event.promise); // [object Promise] - the promise that generated the error
  alert(event.reason); // Error: Whoops! - the unhandled error object
});

new Promise(function() {
  throw new Error(&quot;Whoops!&quot;);
}); // no catch to handle the error</code></pre>
        </div>
      </div>
      
      </div><p>è¯¥äº‹ä»¶æ˜¯ <a href="javascript:if(confirm('https://html.spec.whatwg.org/multipage/webappapis.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://html.spec.whatwg.org/multipage/webappapis.html#unhandled-promise-rejections'" tppabs="https://html.spec.whatwg.org/multipage/webappapis.html#unhandled-promise-rejections">HTML æ ‡å‡†</a>çš„ä¸€éƒ¨åˆ†ã€‚ç°åœ¨ï¼Œå¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œå¹¶ä¸”æ²¡æœ‰ <code>.catch</code>ï¼Œåˆ™ <code>unhandledrejection</code> å¤„ç†ç¨‹åºè§¦å‘ï¼š<code>event</code> å¯¹è±¡å…·æœ‰æœ‰å…³é”™è¯¯çš„ä¿¡æ¯ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å¯¹å…¶æ‰§è¡ŒæŸäº›æ“ä½œã€‚</p>
<p>é€šå¸¸è¿™æ ·çš„é”™è¯¯æ˜¯ä¸å¯æ¢å¤çš„ï¼Œå› æ­¤æˆ‘ä»¬æœ€å¥½çš„æ–¹æ³•æ˜¯å‘ŠçŸ¥ç”¨æˆ·æœ‰å…³é—®é¢˜ï¼Œå¹¶ä¸”å¯èƒ½çš„è¯å‘æœåŠ¡å™¨æŠ¥å‘Šæ­¤äº‹ä»¶ã€‚</p>
<p>åœ¨ Node.js ç­‰éæµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œè¿˜æœ‰å…¶ä»–ç±»ä¼¼çš„æ–¹æ³•å¯ä»¥è·Ÿè¸ªæœªå¤„ç†çš„é”™è¯¯ã€‚</p>
<h2><a class="main__anchor" name="zong-jie" href="#zong-jie">æ€»ç»“</a></h2><p>æ€»è€Œè¨€ä¹‹ï¼Œ<code>.then/catch(handler)</code> è¿”å›ä¸€ä¸ªæ–°çš„ promiseï¼Œå®ƒæ ¹æ®å¤„ç†ç¨‹åºçš„ä½œç”¨è€Œæ”¹å˜ï¼š</p>
<ol>
<li>å¦‚æœå®ƒè¿”å›ä¸€ä¸ªå€¼æˆ–åœ¨æ²¡æœ‰ <code>return</code>ï¼ˆåŒ <code>return undefined</code>ï¼‰çš„æƒ…å†µä¸‹ç»“æŸï¼Œåˆ™æ–°çš„ promise å°†å˜ä¸º resolvedï¼Œå¹¶ä¸”ç”¨è¯¥å€¼ä½œå‚æ•°è°ƒç”¨æœ€è¿‘çš„ resolve å¤„ç†ç¨‹åºï¼ˆ<code>.then</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰ã€‚</li>
<li>å¦‚æœå®ƒæŠ›å‡ºé”™è¯¯ï¼Œåˆ™æ–°çš„ promise å°† rejectedï¼Œå¹¶ä¸”ç”¨è¯¥é”™è¯¯ä½œå‚æ•°è°ƒç”¨æœ€æ¥è¿‘çš„ rejection å¤„ç†ç¨‹åºï¼ˆ<code>.then</code> æˆ– <code>.catch</code> çš„ç¬¬äºŒä¸ªå‚æ•°ï¼‰ã€‚</li>
<li>å¦‚æœå®ƒè¿”å›ä¸€ä¸ª promiseï¼Œé‚£ä¹ˆ JavaScript ä¼šåœ¨å®ƒç»“æŸå‰ç­‰å¾…ï¼Œç„¶åä»¥ç›¸åŒçš„æ–¹å¼å¯¹å…¶ç»“æœèµ·ä½œç”¨ã€‚</li>
</ol>
<p>å›¾ä¸­å±•ç¤º <code>.then/catch</code> å˜åŒ–å¯¼è‡´è¿”å› promise å˜åŒ–ï¼š</p>
<figure><div class="image" style="width:685px">
      <div class="image__ratio" style="padding-top:39.270072992700726%"></div>
      <img src="article/promise-chaining/promise-handler-variants.png" tppabs="https://zh.javascript.info/article/promise-chaining/promise-handler-variants.png" alt="" width="685" height="269" class="image__image">
      </div></figure><p>å°å›¾ä¸­æ˜¾ç¤ºå¦‚ä½•è°ƒç”¨å¤„ç†ç¨‹åºï¼š</p>
<figure><div class="image" style="width:737px">
      <div class="image__ratio" style="padding-top:21.845318860244234%"></div>
      <img src="article/promise-chaining/promise-handler-variants-2.png" tppabs="https://zh.javascript.info/article/promise-chaining/promise-handler-variants-2.png" alt="" width="737" height="161" class="image__image">
      </div></figure><p>åœ¨ä¸Šé¢çš„é”™è¯¯å¤„ç†ç¤ºä¾‹ä¸­ï¼Œ<code>.catch</code> å§‹ç»ˆæ˜¯é“¾ä¸­çš„æœ€åä¸€ä¸ªã€‚ä½†åœ¨å®è·µä¸­ï¼Œå¹¶éæ¯ä¸ª promise é“¾éƒ½æœ‰ <code>.catch</code>ã€‚å°±åƒå¸¸è§„ä»£ç å¹¶ä¸æ€»æ˜¯åŒ…åœ¨ <code>try..catch</code> ä¸­ä¸€æ ·ã€‚</p>
<p>æˆ‘ä»¬åº”è¯¥å‡†ç¡®åœ°æ”¾ç½® <code>.catch</code> åœ¨æˆ‘ä»¬æƒ³è¦å¤„ç†é”™è¯¯çš„åœ°æ–¹ï¼Œå¹¶çŸ¥é“å¦‚ä½•å¤„ç†å®ƒä»¬ã€‚ä½¿ç”¨è‡ªå®šä¹‰é”™è¯¯ç±»å¯ä»¥å¸®åŠ©åˆ†æé”™è¯¯å¹¶é‡æ–°æŠ›å‡ºé‚£äº›æˆ‘ä»¬æ— æ³•å¤„ç†çš„é”™è¯¯ã€‚</p>
<p>å¯¹äºè¶…å‡ºæˆ‘ä»¬çš„èŒƒå›´çš„é”™è¯¯ï¼Œæˆ‘ä»¬åº”è¯¥ç”¨ <code>unhandledrejection</code> äº‹ä»¶å¤„ç†ç¨‹åºï¼ˆå¯¹äºæµè§ˆå™¨ï¼Œå…¶å®ƒç¯å¢ƒåŒç†ï¼‰ã€‚è¿™äº›æœªçŸ¥é”™è¯¯é€šå¸¸æ˜¯ä¸å¯æ¢å¤çš„ï¼Œå› æ­¤æˆ‘ä»¬æ‰€è¦åšçš„å°±æ˜¯é€šçŸ¥ç”¨æˆ·ï¼Œå¯èƒ½çš„è¯å‘æˆ‘ä»¬çš„æœåŠ¡å™¨æŠ¥å‘Šæ­¤äº‹ä»¶ã€‚</p>
</div></article><div class="tasks formatted"><h2 class="tasks__title" id="tasks"><a class="tasks__title-anchor main__anchor main__anchor main__anchor_noicon" href="#tasks">ä»»åŠ¡</a></h2><div class="task tasks__task"><div class="task__header"><div class="task__title-wrap"><h3 class="task__title"><a class="main__anchor" href="#promisethen-dui-bi-catch" name="promisethen-dui-bi-catch">Promise: then å¯¹æ¯” catch</a></h3><a class="task__open-link" href="task/then-vs-catch.htm" tppabs="https://zh.javascript.info/task/then-vs-catch" target="_blank"></a></div><div class="task__header-note"></div><div class="task__content"><p>è¿™ä¸¤æ®µä»£ç ç‰‡æ®µæ˜¯å¦ç›¸ç­‰ï¼Ÿæ¢å¥è¯è¯´ï¼Œå¯¹äºä»»ä½•å¤„ç†å‡½æ•°åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œå®ƒä»¬çš„è¡Œä¸ºæ–¹å¼æ˜¯å¦ç›¸åŒï¼Ÿ</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">promise.then(f1, f2);</code></pre>
        </div>
      </div>
      
      </div><p>å¯¹æ¯”ï¼š</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">promise.then(f1).catch(f2);</code></pre>
        </div>
      </div>
      
      </div><button class="task__solution" type="button">è§£å†³æ–¹æ¡ˆ</button><div class="task__answer"><div class="task__answer-content"><p>ç®€å•å›ç­”å°±æ˜¯ï¼š<strong>ä¸ï¼Œå®ƒä»¬ä¸ç›¸ç­‰</strong>ï¼š</p>
<p>ä¸åŒä¹‹å¤„åœ¨äºå¦‚æœ <code>f1</code> ä¸­å‡ºç°é”™è¯¯ï¼Œå®ƒä¼šåœ¨ <code>.catch</code> ä¸­è¢«å¤„ç†ï¼š</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">promise
  .then(f1)
  .catch(f2);</code></pre>
        </div>
      </div>
      
      </div><p>â€¦è€Œè¿™é‡Œä¸æ˜¯ï¼š</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">promise
  .then(f1, f2);</code></pre>
        </div>
      </div>
      
      </div><p>é‚£æ˜¯å› ä¸ºé”™è¯¯æ˜¯æ²¿ç€é“¾ä¼ é€’çš„ï¼Œè€Œåœ¨ç¬¬äºŒä¸ªä»£ç æ®µä¸­ï¼Œ<code>f1</code> ä¸‹é¢å¹¶æ²¡æœ‰é“¾ã€‚</p>
<p>æ¢å¥è¯è¯´ï¼Œ<code>.then</code> å°† results/errors ä¼ é€’ç»™ä¸‹ä¸€ä¸ª <code>.then/catch</code>ã€‚æ‰€ä»¥åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œä¸‹é¢æœ‰ä¸€ä¸ª <code>catch</code> ï¼Œè€Œåœ¨ç¬¬äºŒä¸ªä¾‹å­ä¸­ â€”â€” å¹¶æ²¡æœ‰ <code>catch</code>ï¼Œæ‰€ä»¥é”™è¯¯æœªå¤„ç†ã€‚</p>
</div><button class="close-button task__answer-close" type="button" title="å…³é—­"></button></div></div></div></div><div class="task tasks__task"><div class="task__header"><div class="task__title-wrap"><h3 class="task__title"><a class="main__anchor" href="#settimeout-zhong-de-cuo-wu" name="settimeout-zhong-de-cuo-wu">setTimeout ä¸­çš„é”™è¯¯</a></h3><a class="task__open-link" href="task/error-async.htm" tppabs="https://zh.javascript.info/task/error-async" target="_blank"></a></div><div class="task__header-note"></div><div class="task__content"><p>ä½ è®¤ä¸º <code>.catch</code> ä¼šä¸ä¼šè§¦å‘ï¼Ÿè¯·è§£é‡Šä¸€ä¸‹ï¼Ÿ</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">new Promise(function(resolve, reject) {
  setTimeout(() =&gt; {
    throw new Error(&quot;Whoops!&quot;);
  }, 1000);
}).catch(alert);</code></pre>
        </div>
      </div>
      
      </div><button class="task__solution" type="button">è§£å†³æ–¹æ¡ˆ</button><div class="task__answer"><div class="task__answer-content"><p>ç­”æ¡ˆæ˜¯ï¼š<strong>ä¸ä¼šï¼Œå®ƒä¸ä¼šè§¦å‘</strong>:</p>
<div data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="è¿è¡Œ" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="åœ¨æ²™ç®±ä¸­æ‰“å¼€" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code class="language-javascript">new Promise(function(resolve, reject) {
  setTimeout(() =&gt; {
    throw new Error(&quot;Whoops!&quot;);
  }, 1000);
}).catch(alert);</code></pre>
        </div>
      </div>
      
      </div><p>å°±åƒæœ¬ç« è®²çš„ï¼Œå‡½æ•°ä»£ç è¢«ä¸€ä¸ªâ€œéšå¼çš„ <code>try..catch</code>â€åŒ…å›´ã€‚æ‰€ä»¥æ‰€æœ‰çš„åŒæ­¥é”™è¯¯éƒ½ä¼šè¢«å¤„ç†ã€‚</p>
<p>ä½†æ˜¯ promise ä¸èƒ½å¤„ç†é‚£äº›éæ‰§è¡Œä»£ç è¿è¡Œæ—¶è€Œæ˜¯ä¹‹åäº§ç”Ÿçš„é”™è¯¯ã€‚</p>
</div><button class="close-button task__answer-close" type="button" title="å…³é—­"></button></div></div></div></div></div></div><div class="page__nav-wrap"><a class="page__nav page__nav_prev" href="promise-basics.htm" tppabs="https://zh.javascript.info/promise-basics" data-tooltip="Promise"><span class="page__nav-text"><span class="page__nav-text-shortcut"></span></span><span class="page__nav-text-alternate">ä¸Šä¸€èŠ‚</span></a><a class="page__nav page__nav_next" href="promise-api.htm" tppabs="https://zh.javascript.info/promise-api" data-tooltip="Promise API"><span class="page__nav-text"><span class="page__nav-text-shortcut"></span></span><span class="page__nav-text-alternate">ä¸‹ä¸€èŠ‚</span></a></div><div class="article-tablet-foot tablet-only"><div class="article-tablet-foot__layout"><div class="share-icons"><span class="share-icons__title">åˆ†äº«</span><a class="share share_tw" href="javascript:if(confirm('https://twitter.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://twitter.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining'" tppabs="https://twitter.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining"></a><a class="share share_fb" href="javascript:if(confirm('https://www.facebook.com/sharer/sharer.php?s=100&p%5Burl%5D=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.facebook.com/sharer/sharer.php?s=100&p%5Burl%5D=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining'" tppabs="https://www.facebook.com/sharer/sharer.php?s=100&p%5Burl%5D=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining"></a><a class="share share_gp" href="javascript:if(confirm('https://plus.google.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://plus.google.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining'" tppabs="https://plus.google.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining"></a><a class="share share_vk" href="javascript:if(confirm('https://vkontakte.ru/share.php?url=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://vkontakte.ru/share.php?url=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining'" tppabs="https://vkontakte.ru/share.php?url=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining"></a></div><div class="article-tablet-foot__map"><a class="map" href="tutorial/map.htm" tppabs="https://zh.javascript.info/tutorial/map" data-action="tutorial-map"><span class="map__text">æ•™ç¨‹è·¯çº¿å›¾</span></a></div></div></div><div class="comments formatted" id="comments"><div class="comments__header"><h2 class="comments__header-title"><a href="#comments" name="comments">è¯„è®º</a></h2><div class="comments__read-before"><span class="comments__read-before-link">åœ¨è¯„è®ºä¹‹å‰å…ˆé˜…è¯»æœ¬å†…å®¹â€¦</span><div class="comments__read-before-popup"><div class="comments__read-before-popup-i"><ul><li>æ¬¢è¿ä½ åœ¨æ–‡ç« ä¸‹æ·»åŠ è¡¥å……å†…å®¹ã€æå‡ºä½ çš„é—®é¢˜æˆ–å›ç­”æå‡ºçš„é—®é¢˜ã€‚</li><li>ä½¿ç”¨ <code>&lt;code&gt;</code> æ ‡ç­¾æ’å…¥å‡ è¡Œä»£ç ï¼Œå¯¹äºå¤šè¡Œä»£ç  â€” å¯ä»¥ä½¿ç”¨ <code>&lt;pre&gt;</code>ï¼Œå¯¹äºè¶…è¿‡åè¡Œçš„ä»£ç  â€” å»ºè®®ä½¿ç”¨æ²™ç®±ï¼ˆ<a href="javascript:if(confirm('http://plnkr.co/edit/?p=preview  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://plnkr.co/edit/?p=preview'" tppabs="http://plnkr.co/edit/?p=preview">plnkr</a>ã€<a href="javascript:if(confirm('http://jsbin.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://jsbin.com/'" tppabs="http://jsbin.com/">JSBin</a> å’Œ <a href="javascript:if(confirm('http://codepen.io/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://codepen.io/'" tppabs="http://codepen.io/">codepen</a> ç­‰ï¼‰ã€‚</li><li>å¦‚æœä½ æ— æ³•ç†è§£æ–‡ç« ä¸­çš„å†…å®¹ â€” è¯·è¯¦ç»†è¯´æ˜ã€‚</li></ul></div></div></div></div><div id="disqus_thread"></div><script>var disqus_config = function() { if (!this.page) this.page = {}; Object.assign(this.page, {"url":"https:\/\/zh.javascript.info\/promise-chaining","identifier":"\/promise-chaining"}); };</script><script>var disqus_shortname = "zh-javascript-info";</script><script>var disqus_enabled = true;</script></div></main></div><div class="sidebar page__sidebar sidebar sidebar_sticky-footer"><button class="sidebar__toggle" data-sidebar-toggle></button><a class="map" href="tutorial/map.htm" tppabs="https://zh.javascript.info/tutorial/map" data-action="tutorial-map" data-tooltip="æ•™ç¨‹è·¯çº¿å›¾"></a><div class="sidebar__inner"><div class="sidebar__content"><div class="sidebar__section"><h4 class="sidebar__section-title">ç« èŠ‚</h4><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="async.htm" tppabs="https://zh.javascript.info/async">Promises, async/await</a></li></ul></nav></div><div class="sidebar__section"><h4 class="sidebar__section-title">è¯¾ç¨‹å¯¼èˆª</h4><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="#fan-hui-promises">è¿”å› promises</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#shi-li-loadscript">ç¤ºä¾‹ï¼šloadScript</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#geng-fu-za-de-shi-li-fetch">æ›´å¤æ‚çš„ç¤ºä¾‹ï¼šfetch</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#cuo-wu-chu-li">é”™è¯¯å¤„ç†</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#yin-shi-trycatch">éšå¼ tryâ€¦catch</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#zhong-xin-pao-chu">é‡æ–°æŠ›å‡º</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#fetch-cuo-wu-chu-li-shi-li">Fetch é”™è¯¯å¤„ç†ç¤ºä¾‹</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#wei-chu-li-de-rejections">æœªå¤„ç†çš„ rejections</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#zong-jie">æ€»ç»“</a></li></ul></nav></div><div class="sidebar__section"><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="#tasks">ä»»åŠ¡ (2)</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#comments">è¯„è®º</a></li></ul></nav></div><div class="sidebar__section"><div class="sidebar__section-title">åˆ†äº«</div><a class="share share_tw sidebar__share" href="javascript:if(confirm('https://twitter.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://twitter.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining'" tppabs="https://twitter.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining"></a><a class="share share_fb sidebar__share" href="javascript:if(confirm('https://www.facebook.com/sharer/sharer.php?s=100&p[url]=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.facebook.com/sharer/sharer.php?s=100&p[url]=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining'" tppabs="https://www.facebook.com/sharer/sharer.php?s=100&p[url]=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining"></a><a class="share share_gp sidebar__share" href="javascript:if(confirm('https://plus.google.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://plus.google.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining'" tppabs="https://plus.google.com/share?url=https%3A%2F%2Fzh.javascript.info%2Fpromise-chaining"></a></div><div class="sidebar__section"><a class="sidebar__link" href="javascript:if(confirm('https://github.com/xitu/javascript-tutorial-zh/blob/zh-hans/6-async/03-promise-chaining/article.md  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/xitu/javascript-tutorial-zh/blob/zh-hans/6-async/03-promise-chaining/article.md'" tppabs="https://github.com/xitu/javascript-tutorial-zh/blob/zh-hans/6-async/03-promise-chaining/article.md">åœ¨ Github ä¸Šç¼–è¾‘</a></div></div></div></div></div></div><div class="page-footer"><div class="page-footer__left"><ul class="page-footer__list"><li class="page-footer__item">Â©&nbsp;2007â€”2018&nbsp; Ilya Kantor</li><li class="page-footer__item"><a class="page-footer__link" href="about.htm#contact-us" tppabs="https://zh.javascript.info/about#contact-us">è”ç³»æˆ‘ä»¬</a></li><li class="page-footer__item"><a class="page-footer__link" href="about.htm" tppabs="https://zh.javascript.info/about">å…³äºæœ¬é¡¹ç›®</a></li></ul></div><div class="page-footer__right"><ul class="page-footer__list"><li><a class="page-footer__link" rel="nofollow" href="javascript:if(confirm('http://github.com/iliakan/javascript-tutorial-zh  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://github.com/iliakan/javascript-tutorial-zh'" tppabs="http://github.com/iliakan/javascript-tutorial-zh">open source</a></li></ul></div></div></body></html>